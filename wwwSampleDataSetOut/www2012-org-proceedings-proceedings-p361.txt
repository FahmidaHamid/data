On Revenue in the Generalized Second Price Auction ∗

†
Brendan Lucier
Microsoft Research

New England

brlucier@microsoft.com

‡
Renato Paes Leme
Dept of Computer Science

Cornell University

renatoppl@cs.cornell.edu

§

Éva Tardos

Dept of Computer Science

Cornell University

eva@cs.cornell.edu

ABSTRACT
The Generalized Second Price (GSP) auction is the primary
auction used for selling sponsored search advertisements. In
this paper we consider the revenue of this auction at equi-
librium. We prove that if agent values are drawn from
identical regular distributions, then the GSP auction paired
with an appropriate reserve price generates a constant frac-
tion (1/6th) of the optimal revenue.

In the full-information game, we show that at any Nash
equilibrium of the GSP auction obtains at least half of the
revenue of the VCG mechanism excluding the payment of a
single participant. This bound holds also with any reserve
price, and is tight.

Finally, we consider the tradeoﬀ between maximizing rev-
enue and social welfare. We introduce a natural convexity
assumption on the click-through rates and show that it im-
plies that the revenue-maximizing equilibrium of GSP in the
full information model will necessarily be envy-free. In par-
ticular, it is always possible to maximize revenue and social
welfare simultaneously when click-through rates are convex.
Without this convexity assumption, however, we demon-
strate that revenue may be maximized at a non-envy-free
equilibrium that generates a socially ineﬃcient allocation.

Categories and Subject Descriptors
J.4 [Social and Behavioral Sciences]: Economics; F.2.2
[Analysis of Algorithms and Problem Complexity]:
Nonnumerical Algorithms and Problems

General Terms
games, economics, algorithms

a preliminary version of this work was presented in the

Keywords
sponsored search auctions, revenue
∗
AdAuctions workshop 2011.
†
This work was done in part at the University of Toronto.
‡
Supported in part by NSF grants CCF-0729006.
§
Supported in part by NSF grants CCF-0910940 and CCF-
0729006, ONR grant N00014-98-1-0589, a Yahoo! Research
Alliance Grant, and a Google Research Grant.

Copyright is held by the International World Wide Web Conference Com-
mittee (IW3C2). Distribution of these papers is limited to classroom use,
and personal use by others.
WWW 2012, April 16–20, 2012, Lyon, France.
ACM 978-1-4503-1229-5/12/04.

1.

INTRODUCTION

The sale of sponsored search advertising space is a pri-
mary source of income for Internet companies, and respon-
sible for billions of dollars in annual advertising revenue [7].
The Generalized Second Price (GSP) auction is the premier
method by which sponsored search advertising space is sold;
it is currently employed by Google, Bing, and Yahoo. How-
ever, use of the GSP auction is not universal: the classical
VCG mechanism was adopted by Facebook for its AdAuc-
tion system [12]. In fact, Google also considered switching
its advertising platform to a VCG auction some years ago,
but eventually decided against it [24]. This apparent ten-
sion underlines the importance of understanding how these
mechanisms compare. There are many factors in compar-
ing possible mechanisms: The welfare of three distinct user
groups (the experience of the searchers, the welfare of ad-
vertisers, and the revenue of the auction) are all important
considerations, as well as the simplicity of the auction de-
sign. In this paper, we take the point of view of the seller
and compare the revenue properties of the GSP and VCG
auctions.

Previous studies of the revenue of GSP have largely fo-
cused on outcomes of the full information game, restricted
to the subclass of envy-free equilibria [7, 26, 9]. Here we
consider revenue in equilibria of the Bayesian partial infor-
mation version of the game, as well as equilibria of the full
information game that are not envy-free, and are interested
to show that GSP generates close to as much revenue as the
classical optimal VCG auction. This comparison is natu-
ral, as in the Bayesian model the VCG auction is revenue
optimal with the appropriate reserve price [21].

Let us ﬁrst brieﬂy describe the model introduced by Edel-
man et al [7] and Varian [25]. In sponsored search, a user
makes a query for certain keywords in a search engine and is
presented with a list of relevant advertisements in addition
to organic search results. We assume a “pay-per-click” pric-
ing model, in which the advertiser pays a fee to the search
provider whenever a user clicks on an advertisement. There
are multiple positions (or “slots”) in which an ad may ap-
pear, and the probability that a user clicks an ad depends
on its slot. This is modeled as a click-through rate (CTR),
a probability α associated with each slot, the probability of
getting a click for an advertisement in that position. The
search engine must therefore determine which ads to place
where, and determine a price per click for each slot. This is
done via an auction in which advertisers make bids, which
are viewed as the advertiser’s maximum willingness to pay
per click. We note that this simpliﬁed model as a one-shot

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France361game does not account for advertiser budgets, so models the
case when budgets are large. Also, for simplicity of presen-
tation, we will assume that all ads have the same quality
(i.e. click-through rate does not depend on the advertiser
selected for a slot), though our results for the full informa-
tion game extend to the version of the model with separable
click-though rates.

The VCG and GSP mechanisms diﬀer in the way in which
the aforementioned auction is resolved.
In both auctions,
advertisers are assigned slots in order of their bids, with
higher bidders receiving slots with higher click probabili-
ties. The two auctions diﬀer in their payment schemes. In
VCG, each agent pays an amount equal to his externality
on the other agents: the decrease in the total welfare of all
other agents caused by the presence of this advertiser. By
contrast, in GSP each advertiser simply pays a price per
click equal to the next highest bid. The VCG auction has
the strong property of being truthful in dominant strategies.
The GSP auction is not truthful, and is therefore prone to
strategic bidding behavior. Indeed, strategic manipulation
of bids is well-documented in historical GSP bidding data
[6].

Since the VCG mechanism is truthful, the revenue of VCG
is simply the revenue generated when all bidders declare
their values truthfully. If bidders declare their values truth-
fully in a GSP auction, GSP generates strictly more rev-
enue than VCG. However, rational agents may not declare
their values truthfully when participating in a GSP auction.
Thus, when studying the revenue of GSP, we consider the
revenue generated at a Nash equilibrium; that is, a proﬁle
of bidding strategies such that no advertiser can improve his
utility (or expected utility in the Bayesian case) by unilat-
erally deviating. Our goal, then, is a comparison between
the revenue of the VCG auction and the revenue of GSP at
equilibrium.

Results.

In Section 3 we consider the Bayesian version of this game
when valuations are drawn from identical and independent
distributions that satisfy the regularity condition. We show
that if we allow the auctioneer to include reserve prices the
GSP auction always obtains a constant fraction (1/6th) of
the optimal VCG revenue, in expectation. The Bayesian set-
ting is motivated by player uncertainty: for many keywords,
the ability of a player to exactly predict his opponents types
is impaired. Due to complicating factors such as the bud-
gets, quality scores (which depend on many characteristics
of each query, such as origin, time, and search history of
the user), and the underlying ad allocation algorithm, each
auction is diﬀerent (even those triggered by the same search
term) [23]. The resulting uncertainty is captured by equilib-
ria in a Bayesian partial information model, where bidders
can only evaluate the expected welfare of the equilibrium,
with expectation taken over the valuations of other bidders.
It is well-known that, in this setting the revenue-optimal
truthful mechanism is the VCG auction with Myerson’s re-
serve price [21].

One might also wish to bound the revenue of GSP with
respect to the revenue of VCG without reserve prices, but
we show that this is not possible: there are cases in which
the VCG revenue is unboundedly greater than the GSP
revenue. However, if the slot CTRs satisfy a certain well-
separatedness condition - namely that the click through rates

of adjacent slots diﬀer by at least a certain constant factor -
then we prove that GSP always obtains a constant fraction
of the VCG revenue even in settings of partial information,
extending a result of Lahaie [15] who considered welfare un-
der this assumption on the CTRs. Our result holds even if
we do not assume that agents avoid dominated strategies, as
long as there are at least three participants in the auction.
In Sections 4 and 5 we consider the full information game.
When auctions with the same participants, valuations, and
quality scores are repeated many times each day, a stable
outcome can be modeled by a full-information Nash equi-
librium of the one-shot game. We prove that at any Nash
equilibrium, the revenue generated by GSP is at least half
of the VCG revenue, excluding the single largest payment of
a bidder. Thus, as long as the VCG revenue is not concen-
trated on the payment of a single participant, the worst-case
GSP revenue approximates the VCG revenue to within a
constant factor. This result also holds with an arbitrary re-
serve price. We also provide an example illustrating that the
factor of 2 in our analysis is tight, and the revenue of GSP
at equilibrium may be arbitrarily less than the full revenue
of VCG (without excluding a bidder).

In Section 5 we analyze the tradeoﬀs of the maximum
revenue attainable by the full information GSP mechanism
under diﬀerent equilibrium notions. We demonstrate that
there can exist ineﬃcient, non-envy-free equilibria that ob-
tain greater revenue than any envy-free equilibrium. How-
ever, we prove that if CTRs are convex, meaning that the
marginal increase in CTR is monotone in slot position, then
the optimal revenue always occurs at an envy-free equilib-
rium. This implies that when click-through rates are convex,
the GSP auction optimizes revenue at an equilibrium that
simultaneously maximizes the social welfare. The convexity
assumption we introduce is quite natural and may be of in-
dependent interest. Note that this assumption is satisﬁed in
the case when CTRs degrade by a constant factor from one
slot to the next.

Related Work.

There has been considerable amount of work on the eco-
nomic and algorithmic issues behind sponsored search auc-
tions – see the survey of Lahaie et al [16] for an overview
of the early work and the survey of Maille et al [19] for
recent developments. The GSP model we adopt is due to
Edelman et al [7], Varian [25] and Aggarwal et al [2]. Much
of the previous work on the GSP auction considered social
welfare properties of equilibria. Edelman et al [7] and Var-
ian [25] deﬁne a subclass of Nash equilibria called envy-free
equilibria and show that such equilibria always exist and
are socially optimal, therefore showing that the price of sta-
bility is 1 for the full information game. Paes Leme and
Tardos [22] showed a bound of 1.618 on the price of anar-
chy, which was recently improved to 1.282 by Caragiannis at
al [4]. The Bayesian version of this game, when valuations
are random and only the distribution is public knowledge,
was ﬁrst studied by Gomes and Sweeney [10] who showed
that eﬃcient equilibria may not exist in this setting. Paes
Leme and Tardos [22] prove a price of anarchy of 8, which
was recently improved by Lucier and Paes Leme [18] and
Caragiannis at al [4] to 3.03.

Considering revenue properties of GSP, Edelman et al [7],
and Varian [25] show that envy free equilibria have revenue
at least as good as the revenue of VCG. Both [7] and [25]

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France362present informal arguments to support the equilibrium selec-
tion for this class of equilibria, but there is no strong theo-
retical model that explains this selection [3, 9]. Further, the
notion of envy-free equilibria applies only in the full informa-
tion game. Varian [26] shows how to compute the revenue
optimal envy-free Nash equilibrium, although his model al-
lows agents to overbid (which is dominated strategy, and we
consider it unnatural). We consider the question of maxi-
mum revenue equilibria without the assumption of envy-free
outcomes, and show that in general ineﬃcient equilibria can
generate more revenue than eﬃcient ones, but this is no
longer the case under a natural convexity assumption.

Gomes and Sweeney [10] study GSP as a Bayesian game,
and show that symmetric eﬃcient equilibria may not exist
in the Bayesian setting. They analyze the inﬂuence of click-
through-rates on the revenue in equilibrium and observe the
counter-intuitive phenomenon by which revenue decreases
when click-through-rates increase.

A common tool for increasing revenue in settings of par-
tial information is to apply reserve prices, where bids are
rejected unless they meet some minimum bid r. When bid-
ders’ values are drawn from identically distributed satisfy-
ing the regularity condition1, the revenue-optimal truthful
auction for sponsored search is the VCG auction with an ap-
propriate reserve price [21]. Edelman and Schwarz [8] show
that in GSP auctions reserve prices have a surprisingly large
eﬀect on revenue.

Edelman and Schwarz [9] model the repeated auctions for
a keyword as a repeated game, and show, using Myerson’s
optimal auction [21], that if valuations are drawn from an
iid distribution then the Nash equilibria that arise as a sta-
ble limit of rational play in this repeated game cannot have
revenue more than the optimal auction: VCG with an ap-
propriately chosen reserve price. However, they don’t con-
sider whether GSP may generate revenue much less than the
VCG auction, which is the main question we consider. Also,
unlike Edelman and Schwarz [9], we do not use the repeated
nature of this game for arguing for certain equilibrium selec-
tion: rather, we consider all stable outcomes of the auction,
not only those that arise as limits of rational repeated play.
Finally, we mention that the well-known revenue equiv-
alence theorem, which provides conditions under which al-
ternative mechanisms generate the same revenue at equilib-
rium, does not apply in our settings. Revenue equivalence
requires that agents have values drawn from identical dis-
tributions and that the mechanisms generate the same out-
come. As a result, this equivalence does not apply in the
full information setting, and cannot be used to compare in-
eﬃcient equilibria of GSP to the VCG revenue.

2. PRELIMINARIES

An AdAuctions instance is composed of n players and
n slots.
In the full information model, each player has a
value vi for each click he gets, and each slot j has click-
through-rate αj . That means that if player i is allocated in
slot j, he gets αj clicks in expectation, where α1 ≥ . . . ≥
αn. In the full information setting, we will assume players
are numbered such that v1 ≥ v2 ≥ . . . ≥ vn. Let α =
(α1, . . . , αn) be the CTR vector and v = (v1, . . . , vn) be the
type vector.

1Many common distributions are regular, including all uni-
form, normal, and exponential distributions.

The social welfare generated by the mechanism is given by

A mechanism for the AdAuctions problem is as follows:
it begins by eliciting bids bi from the players, which can be
thought of as declared valuations. We write b = (b1, . . . , bn)
for the bid vector. Using the b and α, the mechanism
chooses an allocation π : [n] → [n] which means that player
π(j) is allocated to slot j, and a price vector p = (p1, . . . , pn),
where pi is the price that player i pays per click. Player i
then experiences utility ui(b) = ασ(i)(vi − pi), where σ(i) =
π−1(i).
(cid:2)

(cid:2)
i αivπ(i) and the revenue is given by R(b) =
i ασ(i)pi. We focus on two mechanisms: GSP and VCG.
In both mechanisms, the players are ordered by their bids,
i.e, π(j) is the player with the jth largest bid, but they
diﬀer in the payments charged. GSP mimics the single-
item second price auction by charging each player the bid
of the next highest bidder, i.e. pi = bπ(σ(i)+1) if σ(i) < n
and zero otherwise. VCG charges each player the exter-
nality it imposes on the other players, which is pV CG
=
ασ(i)

(cid:2)n
j=σ(i)+1(αj−1 − αj )bπ(j).

SW (v, π) =

1

i

VCG is a truthful mechanism:

regardless of what the
other players are doing, it is a weakly dominant strategy for
player i to report his true valuation. The resulting outcome
of VCG is therefore social-welfare optimal and the revenue
is
RV CG

(i− 1)(αi−1 − αi)vi.

(αj−1 − αj )vj =

(cid:3)

(cid:3)

n(cid:3)

(v) =

i

j>i

i=2

The GSP auction, however, is not truthful. Thus, for GSP,
we are interested in the set of bid proﬁles that constitute a
Nash equilibrium, i.e. such that

ui(bi, b−i) ≥ ui(b(cid:2)

i, b−i),∀b(cid:2)

i ∈ [0, vi].

We will assume that players do not overbid (i.e. that bi ≤
vi) since bidding more than one’s true value is a weakly
dominated strategy [22].
We say that an equilibrium is eﬃcient if it maximizes
social welfare, i.e. π(i) = i, ∀i in the full information version.
We will also consider the comparison between VCG and
GSP in the presence of a reserve price. Let VCGr be the
VCG mechanism with reserve price r, where we discard all
players with bids smaller then r and run the VCG mecha-
nism on the remaining players, who then pay price per click
max{pi, r}.
In the analogous variant of the GSP mecha-
nism, which we call GSP with reserve price r (GSPr), we
also discard all players with bids smaller then r, the remain-
ing players are allocated using GSP, and the last player to
be allocated pays price r per click.

Below, we represent the special classes of equilibria that
have been studied in the literature, which we call equilib-
rium hierarchy for GSP. We deﬁne and discuss them in
Section 5 :

(cid:2)

(cid:3)

(cid:2)

⊆

VCG

outcome

envy-free
equilibria

(cid:3)

(cid:2)

⊆

(cid:3)

(cid:2)

(cid:3)

eﬃcient
Nash eq

⊆

all

Nash

2.1 Bayesian setting

In a Bayesian setting, each player knows her own valuation
but only knows a distribution on the other players’ valua-
tions. In this model the values of the players are random
variables, with type vector v drawn from a known distribu-
tion F . After learning his own value vi, a player chooses a
bid bi(vi) to play in the AdAuctions game. The strategies

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France363are therefore bidding functions bi : R+ → R+, and we will
continue to assume that players do not overbid, i.e. bi(v) ≤ v
(again, since overbidding is weakly dominated). A set of bid-
ding functions is a Bayes-Nash equilibrium if, for all i,
vi, and b(cid:2)
i,

i(vi), b−i(v−i))|vi].

E[ui(bi(vi), b−i(v−i))|vi] ≥ E[ui(b(cid:2)
A useful tool for studying revenue in the Bayesian set-
ting is Myerson’s Lemma, which can be rephrased in the
AdAuctions setting as follows. Given a distribution F over
agent values, the virtual valuation function is deﬁned by
φ(x) = x − 1−F (x)

.

f (x)

Lemma 1 (Myerson [21]) At any Bayes-Nash equilibrium
of an AdAuction mechanism, we have that, for all i, E[ασ(i)pi] =
E[ασ(i)φ(vi)] where pi is the payment per click of player i
and ασ(i) is the number of clicks received by agent i, and
expectation is with respect to v ∼ F.

We say that a distribution is regular if φ(x) is a mono-
tone non-decreasing function. For regular distributions, the
revenue-optimal mechanism for AdAuctions corresponds to
running VCG with Myerson’s reserve price r, which is the
largest value such that φ(r) = 0. We will refer to this as
Myerson’s mechanism, V CGr.

Running GSP (or VCG) with reserve price r means not
allocating any user with value vi < r and running GSP (or
VCG) with the remaining agents. For the allocated agents,
the mechanism charges per click the maximum between the
GSP (VCG) price and r.

A special class of regular distributions is the monotone
hazard rate distributions (MHR), which are the distribu-
tions for which f (x)/(1 − F (x)) is non-decreasing.

3. REVENUE IN THE BAYESIAN SETTING
In this section we consider the revenue properties of GSP
at Bayes-Nash equilibrium. We prove that if agent values
are drawn iid from a regular distribution and GSP is paired
with an appropriate reserve price, the revenue generated at
equilibrium will be within a constant factor of the VCG rev-
enue with optimal reserve, the revenue-optimal mechanism
over all Bayes-Nash implementations. So our result implies
that GSP revenue is within a constant factor of the optimal.
We will ﬁrst consider the special case of MHR distributions,
then prove our result in the more general setting where val-
ues are drawn from regular distributions.

We start by showing that the use of reserve prices is cru-
cial: there are instances in which the GSP auction without
reserve generates no revenue, whereas the VCG auction gen-
erates positive revenue. We do note, however, that one can
bound the revenue of GSP without reserve prices when click-
through rates are well-separated, meaning that there exists
a δ such that αi+1 ≤ δαi for all i. We present these bounds
in Appendix A of the full version [17].
3.1 Revenue without Reserves: Bad Examples
We start by providing an example in the Bayesian set-
ting where VCG generates positive revenue and GSP has a
Bayes-Nash equilibrium that generates zero revenue. Con-
sider three players with iid valuations drawn uniformly from
[1, 2] and three slots with α = [1, 0.5, 0.5]. Let v(i) be the
ith largest valuation (which is naturally a random variable

deﬁned by v). We have
E[RV CG

(v)] = E[0.5v(2)

] =

.

3
4

Now, consider the following equilibrium of GSP: bi(vi) = 0
for i = 2, 3 and b1(v1) = v1. Clearly player 1 is in equi-
librium. To see that players i = 2, 3 are in equilibrium,
suppose player i has valuation vi > 0. Then his expected
utility when bidding any value in [0, 1] is 0.5vi, whereas if
he changed his bid to some b > 1 his utility would be
E[ui(b(cid:2), b−i)|vi] = 0.5vi + 0.5vi P(v1 ≤ b(cid:2)

v1dP(v1) =

) −
= 0.5vi + 0.5vi(b(cid:2) − 1) − (b(cid:2)
≤ 0.5vi.

(cid:4) b(cid:2)
)2 − 1
2

0

≤

Thus agent i cannot increase his expected utility by placing
a non-zero bid.
3.2 Warmup: MHR Valuations

We now show that if valuations are drawn from a MHR
distribution and GSP is paired with the Myerson reserve
price, the resulting mechanism extracts a constant fraction
of the optimal revenue.

In what follows we will write x+ to denote max{x, 0}.

Theorem 2 If valuations are drawn iid from a MHR distri-
bution F and r is the Myerson reserve price for F , then the
expected revenue of GSPr at any Bayes-Nash equilibrium is
at least 1

6 of the optimal revenue.

f (x)

1−F (x)

≤ 1−F (r)

Our proof will make use of the fact that, for MHR distri-
butions, φ(x) ≥ x − r for any x ≥ r. To see this, note that
x − φ(x) =
f (r) = r by monotonicity and the
deﬁnition of Myerson’s reserve price.
Proof. Let b be a Bayes-Nash equilibrium of GSPr, and
let Rr(v) be the expected revenue of GSPr at this equi-
librium. Let RV CG
(v) be the VCGr revenue. Let ran-
(cid:2)
dom variable μ(i) denote the slot occupied by player i in
the optimal (i.e. eﬃcient) allocation. By Myerson’s Lemma,
E[RV CG
i αμ(i)φ(vi)+]. For each player i, let Ei
1
denote the event that bπ(μ(i)) < vi/2, and let Ei
2 denote the
event that bπ(μ(i)) ≥ vi/2. We will consider each of these
events in turn. For the ﬁrst event, we’ll show that player i
contributes to the revenue at least 1/2 his contribution in
the optimum. Consider a player i with value vi. We have

(v)] = E[

r

r

2

ui

Ev−i

vi
2

αμ(i)

, b−i

≤ Ev−i
≤ Ev−i [ui(b)] ≤ Ev−i [ασ(i)vi]
where the ﬁrst inequality is due to the deﬁnition of Ei
1 im-
plying that a bid of vi/2 would win slot μ(i) (or better)
at price no more than vi/2; the second follows since b is a
Bayes-Nash equilibrium, and the third comes from the def-
inition of utility. Notice that all the expectations are taken
over v−i and vi is a constant, so we can divide by vi, mul-
tiply by φ(vi)+, take expectations over vi and sum over all
players i to obtain

(cid:6)
1}
(cid:0){Ei

(cid:5)

(cid:5)

(cid:7) vi

(cid:8)(cid:6)

(cid:3)

(cid:3)

Ev[αμ(i)φ(vi)

+

(cid:0){Ei

1}] ≤ 2

Ev[ασ(i)φ(vi)

+

]

i

i

= 2Ev[Rr(v)].

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France364For the second event, consider again a player i with value vi.
(cid:10)
We will show that the player who gets slot μ(i) contributes
to the revenue. We have
2}
(cid:0){Ei

φ(vi)+

αμ(i)

(cid:9)

Ev−i

(cid:5)

(cid:6)
≤ Ev−i
2}
(cid:0){Ei
≤ Ev−i [αμ(i)vπ(μ(i))]
≤ Ev−i [αμ(i)(r + φ(vπ(μ(i)))

αμ(i)

vi
2

)]
where we used the fact that x ≥ φ(x)+ ≥ x − r for all x.
Taking expectations over vi, summing over all players, and
noting that event Ei

2 implies that vπ(μ(i)) ≥ r, we obtain

2

+

Ev[αμ(i)φ(vi)

(cid:3)

+

(cid:0){Ei

2}] ≤
(cid:3)

Ev[ασ(i)φ(vi)

+

] + 2

ασ(i)r(cid:0){vi ≥ r}.

i

i

(cid:2)
(cid:2)
Since GSPr extracts a revenue of at least r per click from ev-
ery bidder with vi > r, we have Ev[Rr] ≥ Ev[
i ασ(i)r(cid:0){vi ≥
r}]. We conclude that
(cid:0){Ei
2}] ≤ 4E[Rr].
i Ev−i [αμ(i)φ(vi)+
(cid:11)(cid:3)
Combining our analysis for the two events, we have
1} + (cid:0){Ei

2})
≤ 2E[Rr(v)] + 4E[Rr(v)] = 6E[Rr(v)].

E[RV CG

αμ(i)φ(vi)

((cid:0){Ei

(v)] = E

(cid:12)

+

r

i

(cid:3)

i

≤ 2

3.3 Regular valuations
We now show that if player valuations are drawn from a
regular distribution, then there exists an r(cid:2)
such that run-
ning GSP with reserve r(cid:2)
extracts a constant fraction of the
optimal revenue. The bound for the MHR bounding the
contribution of the player at slot μ(i) took advantage of the
fact that in a MHR distribution φ(x) ≥ x − r, which may
not be true in a regular distribution. Instead, we will use
that the player in slot μ(i) − 1 pays at least the bid in slot
μ(i). This leaves us with the added diﬃculty in bounding
the revenue generated by the ﬁrst slot. To address this issue,
we make use of the well-studied Prophet Inequalities [13, 14,
11].

A simpliﬁed version of the Prophet Inequality is as follows.
Suppose zi are independent non-negative random variables.
Given any t ≥ 0, write yt for the value of the ﬁrst zi (by
index) satisfying zi > t (or 0 if there is no such zi). Then
the Prophet Inequality states that there exists some t ≥ 0
such that E[yt] ≥ 1
E[maxi zi]. Since the proof is of this fact
is very short, we include it for completness in Appendix B
in the full version [17].

2

As has been noted elsewhere [5], the Prophet Inequality
has immediate consequences for the revenue of auctions with
anonymous reserve prices. The following lemma encapsu-
lates the observation we require.

Lemma 3 If vi are drawn iid from a regular distribution
then there exists r2 ≥ 0 such that, writing Z for the event
that maxi vi ≥ r2, E[maxi φ(vi)+|Z]P(Z) ≥ 1
E[maxi φ(vi)+].
Proof. (sketch) This follows by applying the Prophet
Inequality to virtual values zi = φ(vi) and noting that reg-
ularity implies that vi ≥ r2 iﬀ φ(vi) ≥ φ(r2).

2

It is important to remark that the proof of the Prophet In-
equality is constructive. If one is able to eﬃciently compute

E[(vi−t)+] for every t, then we can compute r2 exactly using
binary search. We refer to the appendix in the full version
[17] for details.

Our approach will now be to analyze the revenue of GSP
under two diﬀerent reserve prices. An argument similar to
Theorem 2 shows that GSP with Myerson reserve obtains a
constant fraction of the optimal revenue for all slots other
than the ﬁrst slot. On the other hand, GSP with reserve r2
from Lemma 3 will obtain at least half of the optimal revenue
generated by the ﬁrst slot. One of these two reserve prices
must therefore generate a constant fraction of the optimal
revenue.

Theorem 4 If valuations vi are drawn iid from a regular
distribution F , then there is a reserve price r such that the
expected revenue of GSPr at any Bayes-Nash equilibrium is
at least 1

6 of the optimal revenue.

(v), Rr(v), and μ(i) as in Theorem
Proof. Deﬁne RV CG
2. Let r1 denote the Myerson reserve price for F . By My-
erson’s Lemma, E[RV CG
i αμ(i)φ(vi)+]. For each
player i, we deﬁne the following three events:

(v)] = E[

(cid:2)

r

r

• Ei
• Ei
• Ei

1 = { bπ(μ(i)) < vi/2 and μ(i) (cid:9)= 1 }
2 = { bπ(μ(i)) ≥ vi/2 and μ(i) (cid:9)= 1 }
3 = { μ(i) = 1 }
(cid:3)

We wish to bound the virtual value of the optimal allocation,
conditioning on each of these events in turn. For the ﬁrst
event, we proceed precisely as in Theorem 2 to obtain

Ev−i [αμ(i)φ(vi)

+

(cid:0){Ei

1}] ≤ 2E[Rr1 ].

i

+

(cid:0){Ei

For the second event, we use the revenue from slot μ(1) − 1.
Let random variable pi denote the payment per click of the
player in slot i. Then for all v,
2} ≤ αμ(i)vi(cid:0){Ei
2} ≤ 2αμ(i)−1pμ(i)−1(cid:0){Ei
2}
αμ(i)φ(vi)
where the second inequality follows since Ei
2 implies pμ(i)−1 =
bμ(i) ≥ vi/2. Therefore, summing over all agents i and tak-
(cid:12)
ing expectations, we get
2}
(cid:0){Ei

= 2E[Rr1 ].

(cid:11)(cid:3)

(cid:11)(cid:3)

≤ 2Ev

αμ(i)φ(vi)

αipi

(cid:12)

Ev

+

i

i

Finally, for event Ei
3, consider setting the reserve price to
be r2 from the statement of Lemma 3 (with distribution F ).
Note that

(cid:11)(cid:3)

E

i

(cid:12)
3}
(cid:0){Ei

αμ(i)φ(vi)

+

= α1E[max

i

φ(vi)

+

].

On the other hand, setting reserve price r2 for GSP we get
vi ≥ r2)

E[Rr2 ] ≥ α1E[max

vi ≥ r2]P(max

+ | max

φ(vi)

i

i

i

≥ 1
2

α1E[max

i

φ(vi)

+

]

where the ﬁrst inequality follows by considering only the
expected virtual value due to the ﬁrst slot and the last in-
equality follows from Lemma 3. Combining our analysis for
each of the three cases, we have
E[RV CG

2} + (cid:0){Ei

1} + (cid:0){Ei

(cid:11)(cid:3)

((cid:0){Ei

3})

(cid:12)

+

r

αμ(i)φ(vi)
] = E
≤ 4E[Rr1 ] + 2E[Rr2 ]

i

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France365and hence max{E[Rr1 ], E[Rr2 ]} ≥ 1

6

E[RV CG

r

].

4. REVENUE IN FULL INFORMATION GSP
We now wish to compare the revenue properties of GSP
and VCG in the full information setting. We start by giv-
ing examples showing that there are no universal constants
that bound these two quantities. Then we introduce a new
benchmark related to VCG, and show that the GSP revenue
is not too low relative to this benchmark.
4.1 Full Information Revenue: Examples

Unfortunately, there are no universal constants c1, c2 > 0
such that for every full information AdAuctions instance
α, v and for all equilibria b of GSP it holds that

c1 · RV CG

(v) ≤ R(b) ≤ c2 · RV CG

(v).

In fact, GSP can generate arbitrarily more revenue than
VCG and vice-versa. For example, consider two players with
α = {1, 0}, v = {2, 1}. Then VCG generates revenue 1, but
GSP has the Nash equilibrium b = [2, 0] that generates no
revenue.
As a counter-example for the second inequality, consider
the following instance: α = {1, 1 − }, v = {−1, 1}. Notice
that the revenue produced by VCG is , while GSP has the
equilibrium b = [1, 1] generating revenue 1.
4.2 Revenue Bound in Full Information

Next, we will prove that the GSP revenue cannot be
much less than a revenue benchmark based on the VCG
auction. Intuitively, the diﬃculty behind our bad examples
is in extracting revenue from the player with the largest
private value. Motivated by this, we consider the following
benchmark:

B(v) =

pV CG
i

ασ(i) =

(αj−1 − αj )vj

n(cid:3)

(cid:3)

i=2

j>i

(i − 2)(αi−1 − αi)vi

n(cid:3)
n(cid:3)

i=2

=

i=2

which is the VCG revenue from players 2, 3, . . . , n. Recall
that in the full information setting we assumed that players
are numbered such that v1 ≥ v2 ≥ . . .. We show that the
GSP revenue is always at least half of this benchmark at
any equilibrium. Thus, unless VCG gets most of its revenue
from a single player, GSP revenue will be within a constant
factor of the VCG revenue.

Theorem 5 Given an AdAuctions instance α, v, and a Nash
equilibrium b of GSP, we have R(b) ≥ 1
B(v), and this
bound is tight.

2

We prove Theorem 5 in two steps. First we deﬁne the con-
cept of up-Nash2 equilibrium for GSP, then we show that any
ineﬃcient Nash equilibria can be written as an eﬃcient up-
Nash equilibrium. In the second step, we prove the desired
revenue bound for all eﬃcient up-Nash equilibria.

Deﬁnition 6 Given a bid proﬁle b, we say it is up-Nash
for player i if he can’t increase his utility by taking some slot
2Our concepts of up-Nash and down-Nash equilibria are very
similar to the concepts of upwards stable and downwards
stable equilibria in Markakis and Telelis [20]

above, i.e.

ασ(i)(vi − bπ(σ(i)+1)) ≥ αj (vi − bπ(j)),∀j < σ(i).

Analogously, we say that b is down-Nash for player i if he
can’t increase his utility by taking some slot below, i.e.
ασ(i)(vi − bπ(σ(i)+1)) ≥ αj (vi − bπ(j+1)),∀j > σ(i).

A bid proﬁle is up-Nash (down-Nash) if it is up-Nash (down-
Nash) for all players i. Clearly a bid proﬁle b is a Nash
equilibrium iﬀ it is both up-Nash and down-Nash.

where b(cid:2)

i = bπ(i) is up-Nash.

Lemma 7 If a bid proﬁle b is a Nash equilibrium, then the
(cid:2)
bid proﬁle b
Proof. We will prove the lemma by modifying bid proﬁle
b in a sequence of steps. Fix some k ≤ n, and suppose that
b is a bid proﬁle (with corresponding allocation π) such that
• players j = 1, . . . , k satisfy the Nash conditions (i.e.

both up-Nash and down-Nash) in b,

• players j = k + 1, . . . , n are such that σ(j) = j and

they satisfy the up-Nash conditions in b,

• σ(k) < k.

(cid:2)
by swapping the bids of players k and
We then deﬁne b
i = bi for i (cid:9)= k, π(k), b(cid:2)
π(k), that is setting b(cid:2)
k = bπ(k), and
b(cid:2)
(cid:2)
is up-Nash for players k, . . . , n
π(k) = bk. We claim that b
and Nash for the remaining players. This then implies the
desired result, since we can apply this operation for k = n,
followed by k = n − 1, . . . , 2, resulting in the required bid
proﬁle.

Since our transformation does not alter the bids associated
with given slots, we just need to check three things: the up
and down-Nash inequalities for player π(k), and the up-Nash
inequality for player k.
(cid:2)
Under bid proﬁle b

, player π(k) gets slot σ(k). This
player doesn’t want to change his bid to win any slot j >
σ(k) since in the bid proﬁle b player k with lower value
didn’t want to get these slots. We therefore have ασ(k)(vk −
bπ(σ(k)+1)) ≥ αj (vk − bπ(j+1)) and since vπ(k) ≥ vk, we con-
clude

ασ(k)(vπ(k) − bπ(σ(k)+1)) ≥ αj (vπ(k) − bπ(j+1)).

(1)
To see that player π(k) would not prefer to take any slot
j < σ(k), notice that π(k) didn’t want to move to a higher
slot in b, so αk(vπ(k) − bπ(k+1)) ≥ αj (vπ(k) − bπ(j)). This,
combined with equation (1) for j = k (stating that π(k)
prefers slot σ(k) to k) gives the up-Nash inequality for player
π(k).

(cid:2)
Next consider player k in bid proﬁle b

, where we gets slot
k. We wish to prove the up-Nash inequality for k. Notice
that, in b, π(k) had slot k and didn’t want to switch to a
higher slot, so we know αk(vπ(k) − bπ(k+1)) ≥ αj (vπ(k) −
bπ(j)).
Now, since vπ(k) ≥ vk, we have αk(vk−bπ(k+1)) ≥ αj (vk−

bπ(j)) which is the desired inequality.

Now to prove Theorem 5 we use the up-Nash proﬁle b(cid:2)

.

Proof of Theorem 5 : Given any Nash equilibrium b,
(cid:2)
consider the bid proﬁle b
of Lemma 7, which is an up-Nash
equilibrium in which each player k occupies slot k. By the
up-Nash inequalities, for each k we have
k+1) ≥ αk−1(vk − b(cid:2)

αk(vk − b(cid:2)

k−1).

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France366We can rewrite this as

αk−1b(cid:2)

k−1 ≥ (αk−1 − αk)vk + αkb(cid:2)

k+1.

Then, since αk ≥ αk+1,
k−1 ≥

αk−1b(cid:2)

(cid:3)

j∈k+2N

(αj−1 − αj )vj

where k + 2N = {k, k + 2, k + 4, . . .}. Now we can bound the
revenue of b:

(cid:3)

R(b) = R(b
(cid:2)

) =
≥

k

(cid:3)
(cid:3)
≥ n(cid:3)

k

k=2

k+1 ≥
αkb(cid:2)
(cid:3)

αk+1b(cid:2)

k+1 ≥
(αj−1 − αj )vj ≥

k

j∈k+2+2N
k − 2
2

(αk−1 − αk)vk =

B(v).

1
2

To show that the bound in Theorem 5 is tight, consider the
following example with n slots and n players, parametrized
by δ > 0:

α = [1, 1, . . . , 1, 1 − δ, 0],
v = [1, 1, . . . ,1 , 1, δ],
b = [δ, δ, . . . , δ, δ, 0].

In this case R(b) = (n − 2)δ + δ(1 − δ) and RV CG(v) =
(2δ − δ2)(n − 3) + δ(1 − δ). Therefore limn→∞
R(b)B(v) = 2 − δ
and it tends to 2 as δ → 0.
Notice that those bounds also carry for the case where
there is a reserve price r. We compare the revenue Rr(b)
with reserve price r, against a slightly modiﬁed benchmark:
Br(v) which is the revenue VCGr extracts from players
2, . . . , n.

2

Corollary 8 Let b be a Nash equilibrium of the GSPr game,
then Rr(b) ≥ 1

Br(v).

Proof. We can assume wlog that vi, bi ≥ r (otherwise
those players don’t participate in any of the auctions). We
(cid:2)
can deﬁne an upper-Nash bid proﬁle b
as in Lemma 7. Now,
(cid:2)
are paying at least r per click.
notice that all players in b
We can divide the players in two groups: players 1 . . . k are
paying more than r in VCGr and players k + 1 . . . n are
paying exactly r. It is trivial that for the players k + 1 . . . n
we extract at least the same revenue under VCGr then under
GSPr. For the rest of the players we need to do the exact
same analysis as in the proof of Theorem 5.

5. TRADEOFF BETWEEN REVENUE AND

EFFICIENCY

In this section we consider the tradeoﬀ between eﬃciency
and revenue, and ask if optimal eﬃciency and optimal rev-
enue can always be achieved in the same equilibrium. We
give a negative answer to this question, showing that for
some AdAuction instances, one can increase revenue by se-
lecting ineﬃcient equilibria. First we recall the equilibrium
hierarchy brieﬂy discussed in the introduction.

Then we characterize the maximum revenue possible for
envy free equilibrium (that is always eﬃcient). Does this
equilibrium class generate more or less revenue than other

classes, such as eﬃcient equilibria or all pure equilibria?
This question of comparing the revenue of VCG and envy-
free equilibria of GSP was addressed by [7], who show that
the revenue in any envy-free equilibrium is at least that of
the VCG outcome (i.e. the VCG outcome is the envy-free
equilibria generating smallest possible revenue). Moreover,
as we’ve shown, an envy-free equilibrium can generate ar-
bitrarily more revenue than the VCG outcome. Varian [26]
shows how to compute the revenue optimal envy free Nash
equilibrium, if we assume that agents will overbid. Allow-
ing overbidding can result in very high revenue (eg.., the
maximum valuation in a single item auction). Here we de-
termine the maximum revenue that can be obtained if we
do not assume that agents bid at envy-free equilibria, and
without requiring that agents apply the dominated strategy
of overbidding.

Finally, we use this characterization to we give a natural
suﬃcient condition under which there is a revenue-optimal
equilibrium that is eﬃcient.
5.1 Equilibrium hierarchy for GSP

Edelman, Ostrovsky and Schwarz [7] and Varian [25] showed

that the full information game always has a Pure Nash equi-
librium, and moreover, there is a pure Nash equilibrium
which has same outcome and payments as VCG. At this
equilibrium, players bid

n(cid:3)

j=i

bV
i =

1

αi−1

(αj−1 − αj )vj .

The authors also deﬁne a class of equilibria called envy-free
or symmetric equilibria. This is the class of bid proﬁles
b such that

ασ(i)(vi − bσ(i)+1) ≥ αj (vi − bj+1).

It is easy to see that all envy-free equilibria are Nash equi-
libria, though not all Nash equilibria are envy-free. The bid
proﬁles that are envy-free are always eﬃcient and the rev-
enue of an envy-free equilibrium is always greater than or
equal to the VCG revenue. That is, if b is an envy-free
equilibrium, R(b) ≥ RV CG(v).

Although all envy-free equilibria are eﬃcient, there are
eﬃcient equilibria that are not envy-free, as one can see for
example in Figure 1, as well as ineﬃcient equilibria. We
therefore have the following hierarchy:

(cid:13)

VCG

outcome

envy-free
equilibria

eﬃcient
Nash eq

all

Nash

(cid:14)

(cid:13)

⊆

(cid:14)

(cid:13)

⊆

(cid:14)

(cid:13)

⊆

(cid:14)

5.2 Envy-free and efﬁcient equilibrium

As shown in the example of Figure 1, there are eﬃcient
equilibria that generate arbitrarily less revenue then any
envy-free equilibrium. For the other direction, we show that
all revenue-optimal eﬃcient equilibria are envy-free.

Theorem 9 For any AdAuctions instance such that αi >
αi+1∀i, all revenue-optimal eﬃcient equilibria are envy-free.
Moreover, we can write the revenue optimal eﬃcient equi-
librium explicitly as function of α, v recursively as follows:

(cid:14)

(cid:13)
(cid:13)

αn−1 − αn

αn−1
αi−1 − αi

αi−1

bn = min

vn,

vn−1

,

bi = min

vi,

vi−1 +

αi
αi−1

bi+1

(cid:14)

∀i < n.

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France367b2

v

(1 − α)

(1 − α)v

(1 − α)v (1 − α)

v

b1

Figure 1: Equilibria hierarchy for GSP for α =
[1, 1/2], v = [1, 2/3]: the strong blue dot represents
the VCG outcome, the pattern region the envy-free
equilibria, the blue region all the eﬃcient equilibria
and the red region the ineﬃcient equilibria

Proof. Given an eﬃcient equilibrium b, if it is not envy-
free, we show that we can improve revenue by slightly in-
creasing one of the bids. If the equilibrium is not envy-free,
there is at least one player that envies the player above, i.e.

αi(vi − bi+1) < αi−1(vi − bi).

As pointed out in [7], if in an eﬃcient equilibrium no player
envies the above slot (i.e. no player i wants to take the above
slot i − 1 by the price per click player i is paying) then the
equilibrium is envy-free.
Let i be the player with the smallest index that envies slot
i − 1. Consider the bid proﬁle b
j = bj for j (cid:9)= i
(cid:2)
and b(cid:2)
i = bi + . We will verify that the Nash inequalities
for player i − 1 still hold when  > 0 is suﬃciently small. In
other words, we will show that no Nash inequality for player
i − 1 holds with equality in b.

such that b(cid:2)

For slots j > i − 1, notice that

αj(vi − bj+1) ≤ αi(vi − bi+1) < αi−1(vi − bi)

where the ﬁrst is a standard Nash inequality and the second
is the hypothesis that player i envies the above slot. Now,
since vi−1 > vi in an eﬃcient equilibrium, we have

αj (vi−1 − bj+1) < αi−1(vi−1 − bi).

For slots j < i − 1, we use the fact that player i is the
ﬁrst envious player. Also, without loss of generality, we can
assume player 1 bids v1. Therefore we need to verify the
Nash inequalities only for j = 2, 3, . . . , k − 1. We have

αi−1(vi − bi) ≥ αj (vi − bj+1) > αj(vi − bj)

where the ﬁrst inequality comes from the fact that player
i− 1 doesn’t envy any player j above him and the second in-
equality comes from the fact that bj > bj+1, since otherwise
the player in slot j would envy the player in slot j − 1. This
shows that the revenue optimal equilibrium is envy free.

To see that the bid proﬁle deﬁned in the theorem is op-
timal, we need to show the following things about this bid
proﬁle b: (i) it is in Nash equilibrium, (ii) it is envy free,
and (iii) no other eﬃcient Nash equilibrium generates higher
revenue. Begin by noticing that if b is Nash, then player

i − 1 doesn’t want to take slot i, for all i, and therefore
αi−1(vi−1 − bi) ≥ αi(vi−1 − bi+1) and this is satisﬁed by
deﬁnition by the bid vector presented. Notice also that this
series of inequalities implies an upper bound on the maxi-
mum revenue in an eﬃcient equilibrium and this bound is
achieved exactly by the bid proﬁle deﬁned above.
Furthermore, for all j ≤ i − 1 we have αi−1(vj − bi) ≥
αi(vj − bi+1) therefore by composing this expression with
diﬀerent values of i and j, it is straightforward to show that
no player can proﬁt by decreasing his bid. We prove that
no player can proﬁt by overbidding as a simple corollary of
envy-freeness. For that, we need to prove that
αi(vi − bi+1) ≥ αi−1(vi − bi).

If bi = vi than this is trivial.
If not, then substitute the
expression for bi and notice it reduces to vi−1 ≥ vi. Now,
this proved local envy-freeness, what implies that no player
wants the slot above him by the price he player above him
is paying. This in particular implies that no player wants to
increase his bid to take a slot above.

5.3 Cost of efﬁciency: deﬁnition and example
Next we will analyze the relation between revenue and

eﬃciency in GSP auctions.

We deﬁne the cost of eﬃciency for a given proﬁle of click-

through-rates as

CoE(α) = max

v

maxb∈Nash(α,v) R(b)
maxb∈EffNash(α,v) R(b)

where Nash is the set of all bid proﬁles in Nash equilibrium
and EffNash is the set of all eﬃcient Nash equilibrium.

First we give examples in which CoE(α) > 1, in which
case all revenue-optimal equilibria occur at ineﬃcient equi-
libria. Our example will have n = 3 slots and advertis-
ers. The click-through rates are given by α = [1, 2
6 ] and
3
the agent types are v = [1, 7
In this case, the best
8
possible revenue generated by an eﬃcient outcome is given
≈ 1.20833 (this can be calculated using the for-
by 1
mula in Theorem 9). However, for the (ineﬃcient) allocation
π = [2, 1, 3], there is an equilibrium that generates revenue
1.21528.

3 + 7

, 6

8 ].

, 1

8

In Figure 2 we calculate this value empirically for each
α = [1, α2, α3], where each αi is an integer multiple of 0.01
in [0, 1]. In all cases we found that 1 ≤ CoE(α) < 1.1. The
color of (α1, α2) in the graph corresponds to CoE(1, α2, α3),
where blue represents 1 and red represents 1.1. By solving a
constrained non-linear optimization problem, one can show
that the worst CoE for 3 slots is 1.09383.

5.4 Efﬁciency Versus Revenue when Click-

Through-Rates are Convex

We now present a condition on α that implies CoE(α) =
1. Our condition is that the click-through-rates are convex,
meaning that αi − αi+1 ≥ αi+1 − αi+2 for all i. We note
that most models for CTRs studied in the literature satisfy
convexity, such as exponential CTRs [15] and Markovian
user models [1].

Theorem 10 If click-through-rates α are convex then there
is a revenue-maximizing Nash equilibrium that is also eﬃ-
cient.

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France368(cid:2)
(cid:3)
j≥i(αj − αj+1)vm(π,i,j), and hence
R(b
(cid:2)

π(i+1) ≤

(cid:3)

(cid:3)

αib(cid:2)

) =

i

i

j≥i

(αj − αj+1)vm(π,i,j).

(3)

Notice that equation (3) can also be written as a dot prod-
uct between two vectors of type vi and αj − αj+1.
If we
sort the vectors, we see that the (αj − αj+1)-vector is the
same in both (2) and (3). Moreover, the sorted vector of
vj for equation (3) is dominated by that of equation (2), in
the sense that it is pointwise smaller. To see this, simply
(cid:2)i
count how many times we have one of v1, . . . , vi appear in
j=1 1 + max{p | m(π(j, j + p)) ≤ i} ≤(cid:2)i
(cid:2)i
both vectors for each index i: for equation (2) they appear
j=1 j times, whereas for equation (3) they appear at most
j=1 j times. Since
the (αj − αj+1)-vectors are the same in both equations, the
vi vector in the ﬁrst equation dominates the order and in
the ﬁrst equation both vectors are sorted in the same order,
so it must be the case that R(b) ≥ R(b
(cid:2)

).

It remains to remove our simplifying assumption about
saturation and prove the general result. Let b be the opti-
mal eﬃcient equilibrium and let S ⊆ [n + 1] be the set of
saturated bids, including n + 1 (where we consider a ”fake”
player n + 1 with bn+1 = vn+1 = 0), i.e., i ∈ S iﬀ bi = vi.
Let S(i) = min{j ∈ S; j > i}.
Given an allocation π, we wish to deﬁne an upper bound,
Rπ, on the revenue of a bid proﬁle that induces allocation
π at equilibrium. To this end, we deﬁne

⎧⎪⎪⎪⎨
⎪⎪⎪⎩

αS(j)−1vS(j) +
αS(j)−1vS(j) − vj(αS(j)−1 − ασ(j))

(cid:2)S(j)−2
i=σ(j) (αi − αi+1)vm(π,σ(j),i)
if σ(j) ≤ S(j) − 1
if σ(j) ≥ S(j) − 1
(cid:3)

We then deﬁne

Bπ(j) =

Rπ =

Bπ(j).

j

We claim that this is, indeed, an upper bound on revenue.
Moreover, this bound is tight for revenue at eﬃcient equi-
libria (i.e. when π is the identity id).

Claim 11 If bid proﬁle b induces allocation π at equilib-
rium, then R(b) ≤ Rπ.

Claim 12 There exists an eﬃcient equilibrium with revenue
Rid.

Using these two claims we want to argue that id is the
permutation that maximizes Rπ and therefore we can show
(cid:2)
that for all ineﬃcient bid proﬁle b

we have
) ≤ Rπ ≤ Rid = R(b).

R(b
(cid:2)

such that π(cid:2)

(k) = π(k) for k < σ(j) and π(cid:2)

To show this, consider some permutation π. Let j = max{k :
π(k) (cid:9)= k} and deﬁne a permutation π(cid:2)
(k) = k
for k ≥ j and π(cid:2)
(k) = π(k +1)
for σ(j) ≤ k < j. Essentially this is picking the last player
that is not allocated to his correct slot and bring him there.
Now, if we prove that Rπ(cid:2) ≥ Rπ, then we are done, since
we can repeat this procedure many times and get to id.
Claim 13 Rπ(cid:2) ≥ Rπ.
This completes the proof, subject to our claims, which we
prove in Appendix C of the full version [17].

Figure 2: Cost of eﬃciency for α = [1, α2, α3]: in the
plot, blue means 1.0 and red means 1.1.

Our proof follows from a local improvement argument:
given an instance with convex click-through-rates and an
equilibrium that is not eﬃcient, we show how to either im-
prove it revenue or its welfare. A key step of the proof is
bounding the maximum revenue possible in equilibrium for
a given allocation, extending Theorem 9 to ineﬃcient allo-
cations.

Proof. Let b be the revenue maximizing eﬃcient Nash
(cid:2)
equilibrium. Fix an allocation π and let b
be an equilibrium
under allocation π. We say that b is saturated for slot i
if bi = vi. We start by presenting the proof of the theorem
under the simplifying assumption that no slot is saturated
in the maximum revenue equilibrium..

Under the no-saturation assumption, Theorem 9 implies

R(b) =

αibi+1 =

(αj − αj+1)vj.

(2)

(cid:3)

(cid:3)

j≥i

i

(cid:3)

i

Notice that we can view this expression as a dot product
of two vectors where one has elements of the form vi and
other has elements in the form αj − αj+1. Notice also that
due to the convexity assumption, this is a dot product of two
(cid:2)
sorted vectors. Now, for b
, we will bound revenue as follows.
Deﬁne m(π, i, j) = max{π(i), π(i + 1), π(i + 2), . . . , π(j)}.
Let p be such that the k = i, i + 1, . . . , i + p are all the
indices such that m(π, i, k) = π(i). Now, notice that the
player in slot i doesn’t want to take slot i + p + 1, so

αi(vπ(i) − b(cid:2)

π(i+1)) ≥ αi+p+1(vπ(i) − b(cid:2)

π(i+p+2)).

This implies

αib(cid:2)

π(i+1) ≤ αi+p+1b(cid:2)
= αi+p+1b(cid:2)

π(i+p+2) + (αi − αi+p+1)vπ(i)

π(i+p+2) +

(αj − αj+1)vm(π,i,j).

i+p(cid:3)

j=i

We can now apply recursion to conclude that αib(cid:2)

π(i+1) ≤

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France3696. REFERENCES
[1] G. Aggarwal, J. Feldman, S. Muthukrishnan, and

M. P´al. Sponsored search auctions with markovian
users. In Proceedings of the 4th International
Workshop on Internet and Network Economics, WINE
’08, pages 621–628, Berlin, Heidelberg, 2008.
Springer-Verlag.

[2] G. Aggarwal, A. Goel, and R. Motwani. Truthful
auctions for pricing search keywords. In EC ’06:
Proceedings of the 7th ACM conference on Electronic
commerce, pages 1–7, New York, NY, USA, 2006.
ACM.

[3] T. Borgers, I. Cox, M. Pesendorfer, and V. Petricek.

Equilibrium bids in sponsored search auctions: Theory
and evidence. Technical report, 2007.

[4] I. Caragiannis, P. Kanellopoulos, C. Kaklamanis, and

M. Kyropoulou. On the eﬃciency of equilibria in
generalized second price auctions. In EC’11, 2011.

[5] S. Chawla, J. D. Hartline, D. L. Malec, and B. Sivan.

Multi-parameter mechanism design and sequential
posted pricing. In Proceedings of the 42nd ACM
symposium on Theory of computing, STOC ’10, pages
311–320, New York, NY, USA, 2010. ACM.

[6] B. Edelman and M. Ostrovsky. Strategic bidder
behavior in sponsored search auctions. Decision
Support Systems, (43):192–198, 2007.

[7] B. Edelman, M. Ostrovsky, and M. Schwarz. Internet
advertising and the generalized second-price auction:
Selling billions of dollars worth of keywords. The
American Economic Review, 97(1):242–259, March
2007.

[8] B. Edelman and M. Schwarz. Optimal auction design

in a multi-unit environment: The case of sponsored
search auctions. Technical report, 2006.

[9] B. Edelman and M. Schwarz. Optimal auction design

and equilibrium selection in sponsored search
auctions. American Economic Review, (2), 2010.

[10] R. D. Gomes and K. S. Sweeney. Bayes-nash equilibria

of the generalized second price auction. In EC ’09:
Proceedings of the tenth ACM conference on Electronic
commerce, pages 107–108, New York, NY, USA, 2009.
ACM.

[11] M. T. Hajiaghayi, R. Kleinberg, and T. Sandholm.

Automated online mechanism design and prophet
inequalities. In Proceedings of the 22nd national
conference on Artiﬁcial intelligence - Volume 1, pages
58–65. AAAI Press, 2007.

[12] J. Hegeman. Facebook’s ad auction. Talk at Ad

Auctions Workshop, May 2010, 2010.

[13] U. Krengel and L. Sucheston. Semiamarts and ﬁnite

values. In Bull. Amer. Math. Soc. 83, 1977.

[14] U. Krengel and L. Sucheston. On semiamarts and

amarts, and processes with ﬁnite value. In Probability
on Banach Spaces , 1978.

[15] S. Lahaie. An analysis of alternative slot auction

designs for sponsored search. In EC ’06: Proceedings
of the 7th ACM conference on Electronic commerce ,
pages 218–227, New York, NY, USA, 2006. ACM.

[16] S. Lahaie, D. Pennock, A. Saberi, and R. Vohra.

Algorithmic Game Theory , chapter Sponsored search
auctions, pages 699–716. Cambridge University Press,
2007.

[17] B. Lucier, R. P. Leme, and ´Eva Tardos. On revenue in

the generalized second price auction (full version).
www.cs.cornell.edu/~renatoppl/gsp-revenue-
www2012.pdf,
2012.

[18] B. Lucier and R. Paes Leme. Gsp auctions with

correlated types. In EC’11, 2011.

[19] P. Maille, E. Markakis, M. Naldi, G. D. Stamoulis,

and B. Tuﬃn. Sponsored search auctions: An
overview of research with emphasis on game theoretic
aspects. To appear in the Electronic Commerce
Research journal (ECR), 2012.

[20] E. Markakis and O. Telelis. Discrete strategies in
keyword auctions and their ineﬃciency for locally
aware bidders. In Workshop on Internet and Network
Economics (WINE), 2010.

[21] R. Myerson. Optimal auction design. Mathematics of

Operations Research, 6(1):58–73, 1981.

[22] R. Paes Leme and E. Tardos. Pure and bayes-nash

price of anarchy for generalized second price auctions.
In FOCS10: 51st Annual IEEE Symposium on
Foundations of Computer Science, 2010.

[23] F. Pin and P. Key. Stochastic variability in sponsored

search auctions: observations and models. In
Proceedings of the 12th ACM conference on Electronic
commerce, EC ’11, pages 61–70, New York, NY, USA,
2011. ACM.

[24] H. Varian. Mechanism design double feature. Talk at

New York Computer Science and Economics Day,
October 2010, 2010.

[25] H. R. Varian. Position auctions. International Journal

of Industrial Organization, 2006.

[26] H. R. Varian. Online ad auctions. American Economic

Review Papers and Proceedings, 2009.

WWW 2012 – Session: Advertising on the Web 2April 16–20, 2012, Lyon, France370