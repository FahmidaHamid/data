In the past few years, the WWW has changed from being nothing more than an indexed repository of documents towards being a repository of interconnected services and documents.
Web users are now routinely checking the Web for services such as currency converters, shortest driving distance with directions generators, etc.
Unfortunately, not every required service is available on the Web.
Therefore Web research has turned to the time-honored approach of its parent discipline and attempts to provide complex services by, in effect, combining simple services in the way of a work ow of services, what we call a service  ow.
However, the problem of creating a service  ow for a given speci cation is dif cult, and it is a part of the vision of the Semantic Web [1] to let roaming agents perform this dif cult task.
The automatic composition of services requires more than descriptions of service capabilities and input/output parameters.
Rather, a service should also indicate in what situations and in what ways it should be used.
This is comparable to the manual of an electronic device that provides a service.
We call this additional level of description of Web services pragmatic or contextual knowledge.
A service should be described by a pragmatic annotation that represents this pragmatic knowledge, in addition to the semantic and  (Produces the WWW2004-speci c release, location and copyright information).
For use with www2004-submission.cls V1.4.
Supported by ACM.
Copyright is held by the author/owner(s).
syntactic knowledge that describes the necessary parameters and functionalities of the service.
Thus, this paper addresses two problems: (1) How do we de ne, distinguish between, and justify the need for three different kinds of knowledge to be used in service descriptions: syntactic knowledge, semantic knowledge and pragmatic knowledge.
We propose a model to represent Web service compositional knowledge; (2) How do heterogeneous medical services interoperate in a medical service  ow, composed using these three kinds of knowledge.
In this paper, we present an architecture how a service  ow can be automatically composed using syntactic, semantic and pragmatic knowledge.
We demonstrate how heterogeneous Web services can be made interoperable within our framework.
Our motivating examples are drawn from medical services, which should be called, in our case,  Semantic Medical Services (SMS). 

 We will discuss three kinds of compositional knowledge.
The  rst kind of compositional knowledge is based on a syntactic constraint, that is, if the syntactic constraints on compositionality cannot be met, then a service is not composable and cannot be selected.
For example, a clinical service may require as a precondition a valid patient ID, and as input the patient demographic information and insurance information.
As output it generates an order, and as effect the relevant patient data are collected and transferred to a subsequent department.
The selection of this service is constrained by the fact that the agent must be able to supply the input patient ID.
If not, the service cannot be used by this agent.
The second kind of compositional knowledge is based on semantic constraints.
Web service compositionality often depends on the proper order of two services.
For instance, the health care service provided by a hospital for a new patient requires an agent to admit the patient  rst, and then perform scheduling for this patient.
If this order is not respected, the two services (admission and scheduling) cannot be composed.
This ordering relationship therefore constrains the compositionality of services.
The selected service is required to be part of the service  ow.
Thus, the application of semantic constraints (rules) plays a signi cant role in service compositionality.
The semantic composition rules often require extensive domain expert knowledge, such as knowledge of health care policies, drug regulations, health insurance policies, etc.
The third type of knowledge necessary for the composition of services, which has been given little attention in the literature, is contextual or pragmatic knowledge, which may also be expressed by sets of rules.
Pragmatic knowledge is about the situations in which a service should be used.
As such it is not about the service itself, but about the way the service relates to the satisfaction of the
 the case that several services possess the same pro le and provide the same functionalities.
The automated service selection may require pragmatic knowledge.
For example, when selecting a lab for a blood test, choose one that is close to the patient s work place or home.
This pragmatic rule applies when several labs that are in competition with each other provide the same type of services.
If the information is needed before a speci c date, then a provider that is more expensive may be acceptable.
This kind of pragmatic knowledge needs to be modelled in order for the agent to automatically select one service over the other, and compose them in a sensible and highly personalized way.
In summary, syntactic composition knowledge allows an agent to consider all compositions with correct I/O conditions.
Semantic composition knowledge constrains the agent to make sensible compositions that conform with the relevant policies and organizational knowledge.
Pragmatic composition knowledge allows the agent to make reasonable compositions with respect to the needs and preferences of the initiator of the agent.
One may also look at the three kinds of compositional knowledge from an outcomes perspective.
Without syntactic knowledge one cannot generate a service  ow at all.
Without semantic knowledge one cannot generate a service  ow that conforms to all existing rules and policies and that produces an objectively reasonable result.
Without pragmatic knowledge one cannot guarantee a service  ow that produces a useful result for the given circumstances.
In medical research, there is a need to exchange valuable information between different researchers or research groups.
However, it is dif cult to build automated procedures for resource sharing (e.g., patient records or images), analysis across organizations, which follow different data models and document structures.
Most existing health care infrastructures are based on legacy components.
Thus, interoperability across such different services from different organizations becomes more dif cult.
We need to have some common  data medium  for information interchange between the applications so that heterogeneous data can be easily converted into formats understandable to respective applications.
As practical approaches to resolving these issues, work  ow solutions have been successfully implemented in many health care en-terprises1.
Work ow technology offers several advantages, including automation and streamlining of processes and signi cant cost reductions.
Also, ongoing research efforts (Health Level 7 (HL7) and Digital Imaging and Communications in Medicine (DICOM)) provide standards for the exchange, management and integration of medical resources that support clinical patient care and the delivery and evaluation of healthcare services.
As these solutions are not at a level suf cient to resolve all relevant issues, additional research is required on how to handle them.
We are in process of developing developing Semantic Medical Services, where we are in the process of integrating various infor-matics solutions to facilitate collaborative medical research.
The SMS architecture (Figure 1) basically contains the following components: SMS Editor allows mapping of service parameters (input, output, preconditions, effects) to concepts in prede ned medical ontologies.
New ontologies could be loaded in the editor.
The editor parses the WSDL (Web service De nition Language) documents and creates the service grounding descriptions.
One interesting feature is plugging of new medical ontologies (required for mapping service parameters).
Once stored in the composition rule Figure 1: The SMS System Architecture KB these ontologies are used by the Semantic Matching component (SEMIO).
SMS Evaluator performs evaluation of a service, based on the pragmatics de ned for selection of a particular service.
SMS Composer evaluates services using syntactic and semantic rules.
The service composition aspects was bit tricky where we followed a cyclic approach: matching of concepts followed by pragmatic evaluation.
SMS Execution Engine actually executes the services.
We used some of the existing tools available for this purpose2, this tool mandates the process speci cation in speci c format.
Current Web services support a certain level of interoperability in using and accessing them.
The next level of interoperability cannot be achieved by just making services available, but requires providing automatic mechanisms so that the services can be linked in appropriate and meaningful ways.
Automatic composition and interoperability of Web services [4] have been achieved through mapping, service veri cation, and execution monitoring.
Scienti c work ow [2] is supposed to support interoperation through semantics.
It may have the potential to support Web service descriptions for service discovery, invocation, activation and execution of an identi ed service by an agent or other service [4].
Unlike these efforts, our approach emphasizes the importance of different kinds of knowledge for heterogeneous semantics for the automatic composition of service  ows.
There have been efforts in representing business contracts for service evaluation and negotiations [3] but how to use such pragmatic knowledge for service matching remains still unresolved.
In this paper, we have laid out an architecture of the knowledge processing that is necessary for composing individual services into service  ows.
We have classi ed service description knowledge into syntactic, semantic and pragmatic composition rules that play a major role in discovery, selection and composition of Web services.
The description of rules with service concepts allows the system to identify the relevant rules in a certain domain and to identify and select appropriate Web services for composition.
