Social networks have attracted much attention these days.
Social networking services such as Facebook, Orkut, Flickr and LiveJour-nal, have millions of users.
Users are allowed to interact with other people besides having a pro le with some attributes.
There have been many works to analyze the behavior of social networks and their growth patterns [7][15][9][10].
Most existing models consider the social networks only as a graph with nodes and edges.
Recently, some researchers have investigated social networks which include attributes for nodes [18][11].
In this paper we investigate Social Rating Networks (SRN).
A Social Rating Network is a social network in which each user expresses ratings on some items besides creating social relations to other users.
Users in a social rating network can perform two types of actions: creating a link to another user (social action) and creating a rating for an item (rating action).
Note that the "rating action" is a general term and includes the real valued item ratings in Epinions and Flixster and binary rating values such as joining a community in Facebook and LiveJournal or adding a photo to your favorite list in Flickr.
In other words different types of user behaviors can be formulated as a rating action.
In our experiments, we use one data set with real valued ratings (Epinions) and another data set with binary ratings (Flickr).
In this paper, we analyze and model the behavior of users while performing different actions.
We also take into account the times-tamp to analyze the temporal dynamics of user behavior.
Our model assume real valued ratings and binary ratings such as joining a community can be considered as special cases of real valued ratings.
Many effects in uence the behavior of users in the evolution of a social rating network.
A fundamental property of social networks is that people tend to behave similarly to their friends.
The process of social in uence [4] in SRNs leads to people adopting the rating behavior of their friends.
Also people may adopt the rating behavior from users having similar rating patterns.
We call this correlational in uence.
While this effect is the implicit foundation of the successful collaborative  ltering recommenders [5], it has not yet been explicitly considered in social network models.
The social behavior of users is also investigated.
As discussed in [3], people tend to form relationships with others who are already similar to them, so-called selection[12].
However, we argue that social selection is not the only mechanism in uencing the social relation creation process in SRNs.
Implied by the well-known trust transitivity [6], people tend to create social relations to friends of their friends.
We call this effect transitivity.
There are also some other effects that in uence the behavior of users.
For example users may create social relations to other users who live in the same location, or they may befriend their co-pendent of their friends.
These effects are called environmental or external effects [1].
Since we do not have access to these kinds of information, we make a simplifying assumption about these kinds of behaviors: when creating a social relation, we assume that there is a chance that users create a link to a random existing user (representing unknown effects) or to a new user.
Similarly, there is a chance that users rate a random existing item or a new item.
According to our observations from real life data, different effects in uencing the behavior of users are dynamic.
In other words, the strength of each each effect is not constant throughout the evolution of an SRN.
For example, when very few users have created social relations and the average number of social relations per user is very low, the strength of social in uence and transitivity is low, but these effects become more important during the growth of a social rating network in which users rate more items, create more social relations and are exposed to more people and items.
Effects in uencing the behavior of users are not the only dynamic components governing the evolution of an SRN.
At the beginning of the evolution when there are only few nodes in the system, the rate of new users joining the system is high.
Also, the rate of creating a social relation to a new user decreases with the increase in the number of existing users in the system.
In this paper, based on our observations and analysis, we propose a probabilistic generative model to model the behavior of users and capture the temporal dynamics of different effects in uencing the behavior of users.
To capture the dynamism of effects, we model each of them as a function of some evolving features of the SRN such as the number of users, the number of neighbors for a users, etc.
This generative model can serve various purposes.
First, there are very few SRN datasets publicly available.
This is mainly due to privacy concerns in social networks, especially when some behaviors of the user should also get published.
The lack of publicly available datasets is seriously restricting research on social network based recommendation.
A generative model for social rating networks can be used to generate synthetic datasets with properties similar to those of real-life datasets, which can be used for research purposes.
Moreover, the study of the evolution of social rating networks and the growth patterns for social networks and rating pro les is an important application of a generative model, providing insights into models developed in the social sciences.
Also such a model can be used for predicting future links, ratings or community structures.
The main contributions of this paper are as follows: (cid:15) We analyze the temporal dynamics of SRNs and provide insights on bidirectional effects of social relations and rating patterns.
We analyze and model the dynamism of effects in uencing the behavior of users in an SRN.
The dynamic nature of these effects has been neglected in the literature.
(cid:15) We present a generative model for the evolution of SRNs, modeling different effects in uencing the behavior of users.
To the best of our knowledge, our model is the  rst one to comprehensively capture all the four effects between social relations and ratings: social-on-rating (social in uence), social-on-social (transitivity), ratings-on-social (selection), ratings-on-rating (correlational in uence).
(cid:15) We perform an experimental study on two real life data sets (Epinions and Flickr), showing that the proposed model can indeed produce realistic SRNs.
To compare different generative models we introduce several formal evaluation metrics.
(cid:15) Our experimental study provides interesting insights into the factors that drive SRNs.
For example, we  nd that transitivity is much more important than selection in the creation of social relations for both Epinions and Flickr.
The rest of the paper is organized as follows.
We present our observations and analysis of the temporal dynamics of SRNs in section 2.
Based on our observations and analysis, we present a model for the behavior of users and the evolution of SRNs in section 3.
Related work is discussed in section 4.
Evaluation metrics and experimental results are presented in section 5.
Section 6 concludes the paper and presents some directions for future work.
To observe the behavior of users in an SRN and to analyze the evolution of SRNs, we performed experimental studies on two real life data sets: Epinions and Flickr.
Epinions.com is an online reviewing website.
In Epinions, two types of actions are provided: users rating items with some rating values, and users creating social relations to other users.In Flickr, we consider two types of actions: users creating social relations to other users, and users adding photos to their favorite list.
We consider adding a photo to favorites as a binary rating action (with rating value 1).
We represent the data set as a sequence of actions A.
Each action can be either a rating action creating a rating or a social action creating a social relation.
Every action a in A is also associated with a timestamp.
We order the actions with respect to their timestamps and observe the behavior of users in chronological order.
For every action a, we observe and analyze the behavior of users as follows (see  gure 1): (cid:15) Who is the user u performing the action?
One of the existing users or a new user joining the SRN and performing his  rst action.
(cid:15) What type of action is being performed?
A rating action or a social action?
(cid:15) If it is a social action, who is the target user v to whom the social relation is being created?
  If transitivity is playing role in this action, then v should be one of the friends of friends of u.
  Selection leads to select v among top similar users to u.
  If unknown external effects are in uencing this action, then v could be any existing user.
  Finally, there is the possibility of v being a new user just joining the SRN.
(cid:15) If it is a rating action, what item i is being rated and by what value?
  If social in uence is affecting the rating behavior of u in this action, then i should be one the items rated by friends of u.
The value of the rating should also be affected by ratings expressed by direct neighbors of u on i.
  If correlational in uence is affecting the behavior of u, then i should be one of the items rated by top similar users to u.
The rating of u on i should also be in u-enced by the ratings of similar users on i.
  If some unknown external effect is in uencing the behavior of u in this action, then i could be any existing item.
  It could be also the case that i is a new item which has not been rated in the SRN before this action.
Note that the rating actions being affected by social in uence, cor-relational in uence and unknown external effects may overlap.
Also the social actions in uenced by transitivity, selection and unknown external effects may overlap.
We compute the similarity among users using Pearson correlation [16] between their ratings.
Similar to the idea used in [3] to construct a similarity network, the number of top similar users considered for each user u in rating actions is the same as the number of direct neighbors of u in the social net-
work, Nu considered is the same as the number of users who are friends of friends of u.
First we analyze the role of new users and items in the evolution of SRNs.
As shown in  gure 1, the probability that an action is performed by a new user is  .
However this probability is not a  xed number.
Figure 2(a) presents our observation on the percentage of actions being performed by new users versus the total number of users existing in Epinions and Flickr.
As shown in this  gure, for both data sets   has a power law-like distribution over jNtj, where Nt is the current set of existing users in the SRN at time t. At the very beginning of SRN s evolution, when there exists only a few users, the probability of an action being performed by a new user is very high, and this probability decreases very fast with the increase in the number of existing users.
As depicted in  gure 2(a), a similar behavior exists for the percentage of social actions in which a social relation is created to a new user, denoted by (cid:8)t;4.
If the action is a rating action, the percentage of rating actions in which a new item is rated (denoted by (cid:8)r;4) also exhibits a power law-like distribution over the number of existing items for both Epinions and Flickr, as shown in  gure 2(b).
Our observations show that the percentage of social actions ( ) over the total number of actions (denoted by jAtj) remains fairly constant throughout the evolution of SRN for both Epinions and Flickr.
similar users, in our experiments, the number of similar users is set to be at least K=10.
(a) (b) Figure 2: a) The distribution of   and (cid:8)t;4 versus the number of existing users in Epinions and Flickr.
  is the percentage of actions that are performed by a new user.
(cid:8)t;4 is the percentage of social actions that are created to a new user.
b) Evolution of the percentage of ratings in which a new item is rated ((cid:8)r;4).
When a social relation is created by a user to some existing user, it could be either in uenced by transitivity or selection, or by some unknown external effect.
If unknown effects are playing a role, we assume that the social relation is being created to an arbitrary user.
Our observations show that the percentage of social actions that are in uenced by transitivity or selection increases almost linearly with growth of the number of social actions.
We believe that in the course of time more social relations and more ratings are being expressed and hence users get more similar and also get to know friends of their friends.
These events may lead to a stronger in u-ence of similar users and direct neighbors on their behavior for cre-relations created to existing users that are not affected by transitivity or selection for different values of jN uj for both data     sets, where N u is the set of top similar users for u.
As shown in this  gure, the more users   become available in N u, the less likely it becomes that a social action can not be explained by the effect of transitivity or selection.
Again, the diagram resembles a power law distribution.
  u is the set of friends of friends of u and S uj + jS     u and S (a)  t;1 (b)  r;1 Figure 4: a) Relative strength of transitivity and selection for Epinions and Flickr.
Each diagram shows the percentage of social actions in uenced by transitivity or selection that are solely in uenced by transitivity (denoted by  t;1) versus total number of social actions in a data set.
b) Relative strength of social in uence and correlational in uence for Epinions and Flickr.
The diagrams show the percentage of rating actions affected by social or correlational in uence that are solely in uenced by social in uence (denoted by  r;1) versus total number of rating actions.
by social in uence versus the actions affected by correlational in uence.
Figure 4(b) depicts the percentage of rating actions affected by social or correlational in uence that are solely in uenced by social in uence (denoted by  r;1) versus total number of rating actions for Epinions and Flickr.
Again, similar to the case for social actions, this percentage is fairly constant throughout the evolution of the SRN in both Epinions and Flickr.
Our  nal observation is the distribution of rating values throughout the evolution of an SRN.
Figure 5 depicts the evolution of the percentage of each rating value in Epinions2.
Interestingly, we observe that the relative frequency of the rating values are fairly constant during the evolution of the SRN.
The percentage of higher rating values are larger than those of low rating values, demonstrating that users in Epinions tend to be very generous in their ratings.
In this section we exploit our observations and analysis to model the temporal dynamics of social rating networks.
To do so, we represent different effects in uencing the behavior of users in a probabilistic generative model.
A social rating network consists of a sequence of dated actions.
The proposed model is illustrated in  gure 1.
In the following, we
 tion does not apply to the Flickr data set.
(a) (b) Figure 3: a) P(:(transitivity _ selection)): Percentage of social actions that are not affected by transitivity or selection for different values of jN uj in Epinions and Flickr.
b) P(:(social   _ correlational)): Percentage of rating actions that are not affected by social or correlational in uence for different values of jINuj + jISuj in Epinions and Flickr.
uj+jS   Similar behavior is observed for rating actions.
The percentage of rating actions that are affected by social or correlational in u-ence increases almost linearly with the growth of the number of rating actions.
Figure 3(b) depicts the percentage of rating actions rating an existing item that are not affected by social or correla-tional in uence for different values of jINuj + jISuj for both data sets, where INu denotes the set of items rated by friends of u and ISu denotes the set of items rated by top similar users for u. Figures 3(a) and 3(b) show that the percentage of actions that can be explained only by unknown effects decreases in a power law-like distribution in both Epinions and Flickr.
Furthermore we analyze the percentage of social actions in which a social relation is created to a friend of a friend versus the social actions in which the social relation is created to a top similar user.
Surprisingly, this percentage remains fairly constant throughout the evolution of the Epinions data set.
Figure 4(a) shows the percentage of social actions in uenced by transitivity or selection that are solely in uenced by transitivity (denoted by  t;1) versus the total number of social actions for Epinions and Flickr.
Note that social actions in uenced by transitivity may overlap the social actions in uenced by selection.
As shown in this  gure, transitivity plays a more important role in creating social relations than selection in both data sets.
The next observation is the percentage of ratings being affected   u j + jS   u j) = a3 (cid:2) (jN   u j + jS   u j (cid:0) b3)c3 (3) where N   u is the set of friends of friends of u and S   u is the set of   top similar users to u.
Note that as mentioned before, S u is de ned uj.
If we decide to create in a way such that jS   a social relation to an arbitrary existing user, we do so by assigning higher probabilities to users to whom more social relations have been created already.
This is the same as in preferential attachment models [15].
uj is the same as jN     Pe(vju, St) = din(v) +  3 w(din(w) +  3) (4) In the above equation, din(v) is the in-degree of user v in the social network and  3 is a smoothing parameter.
Pe(vju,St) is the probability that u creates the social relation to v who is among existing users.
With probability (1 (cid:0) (cid:8)t;4)(1 (cid:0)  t;3), the action creates a social relation to either a friend of a friend or a top similar user.
Based on our observations in  gure 4(a),  t;1 is constant throughout the evolution of the social rating network and can be learnt as model parameters.
Hence, in our model a social action creates a social relation to a friend of a friend with probability (cid:8)t;1 = (1 (cid:0)  t;4)(1 (cid:0)  t;3) t;1 and to a top similar user with probability (cid:8)t;2 = (1 (cid:0)  t;4)(1 (cid:0)  t;3)(1 (cid:0)  t;1).
If the social action is creating a social relation to a friend of a friend, then the probability of a friend of friend v being selected is proportional to the frequency of appearance of v in the set of friends of friends of u: ft(vju) +  1 Pt(vju, St) = w N  (ft(wju) +  1) (5) where Pt(vju,St) is the probability of creating a social relation from u to a friend of friend v when deciding to create the social relation to a friend of friend.
ft(vju) is the frequency of appearances of v in the set of friends of friends of u and  1 is a smoothing parameter to be learnt.
u Similarly, the probability of creating a social relation to a top similar user v is modeled as follows: Ps(vju, St) = simu;v +  2 w Su (simu;w +  2) (6)     where  2 is the smoothing parameter to be learnt for our model.
Ps(vju,St) is the probability that u creates a social relation to v who is among his top similar users.
Next, we model rating actions.
There are four alternative ways to rate an item: rating a new item, rating an item rated by friends (social in uence), rating an item rated by similar users (correla-tional in uence), and rating a random existing item (unknown effect).
With probability (cid:8)r;4 a new item is rated by action performer u.
As we observed in  gure 2(b), this probability exhibits power law behavior.
So, we model it as follows: (cid:8)r;4 = power(jItj) = a4 (cid:2) (jItj (cid:0) b4)c4 (7) where It is the current set of existing items.
To select the rating value for this rating action, we apply the observation in  gure 5 and model the probability of each rating value r by  r, where  r is a model parameter indicating the prior probability of rating value r.
With probability (cid:8)r;3 = (1(cid:0)(cid:8)r;4) r;3, user u rates an arbitrary existing item in uenced by unknown external effects.
These are the Figure 5: Distribution of rating values throughout the evolution of social network in Epinions.
Possible rating values are integers in the range [1,5].
explain the details of the proposed model for the generative process of performing an action.
In our model,  rst the user to perform the action is selected.
With probability   this user is a new user.
With probability 1 (cid:0)   one of the existing users performs the action.
  is not a  xed value.
Inspired by our observation in  gure 2(a), we assume a power law function for   over the number of existing users as follows:   = power(jNtj) = a1 (cid:2) (jNtj (cid:0) b1)c1 (1) where Nt is the current number of existing users.
Now we introduce P (ujSt), the probability of user u performing the action.
St denotes the current state of the SRN which summarizes the effects of all actions performed up to now.
If the model decides that the next action is to be performed by a new user, then "selecting" a user u is deterministic: the model simply generates a new user u to perform the action.
If it is decided that the next action is to be performed by an existing user, then the probability of a particular user u performing the action is proportional to the number of actions already performed by u taking into account a smoothing parameter  0.
This is similar to the "rich get richer" idea which is also the base of preferential attachment [15][14].
Next, the type of the action being performed is decided: social action or rating action.
Based on the observations the probability of creating a social relation is considered to be a constant parameter  .
If the action is a social action, then there are four alternatives on how to create the social relation: creating a social relation to a new user, to a friend of a friend (transitivity), to a similar user (selection), or to a random existing user (unknown effect).
With probability (cid:8)t;4 the action will create a social relation to a new user.
According to our observations shown in  gure 2(a), (cid:8)t;4 decreases with the increase of the number of existing users by a power function.
So, we model this probability as follows: (cid:8)t;4 = power(jNtj) = a2 (cid:2) (jNtj (cid:0) b2)c2 (2) With probability (cid:8)t;3 = (1 (cid:0) (cid:8)t;4) t;3, the action creates a social relation to some random existing user in uenced by unknown external effects.
These are the social actions that can not be explained by transitivity or selection.
To model  t;3 we exploit the observation shown in  gure 3(a) and assign social actions that can not be explained by transitivity or selection to unknown external effects as follows: in uence.
Similar to our model for social relations, we exploit the observation shown in  gure 3(b) to model  r;3 and assign all rating actions that can not be explained by social or correlational in uence to unknown external effects as follows:  r;3 = power(jINuj + jISuj) = a5 (cid:2) (jINuj + jISuj (cid:0) b5)c5 (8) where INu is the set of items rated by direct neighbors of u and ISu is the set of items rated by top similar users of u.
In this case, the probability of selecting an existing item i, Pe(iju,St), is modeled to be proportional to the number of ratings already expressed for i: Pe(iju, St) =   jIij +  8 j (jIjj +  8) (9) where Ii is the set of users who have rated i.
The next step is to decide the rating value for this action.
For each rating value r, we combine the prior probability  r with the percentage of existing ratings for item i with value r: Pe(rji, St) /   fi(r) +  9 r  (fi(r ) +  9) +  r (10) where fi(r) is the frequency of rating value r for item i and  9 is the smoothing parameter.
Pe(rji,St) is the probability of assigning rating value r to i if i is a random existing user.
With probability (cid:8)r;1 = (1(cid:0) (cid:8)r;4)(1(cid:0)  r;3) r;1, the rating action selects the item from one of the items rated by direct neighbors of u.
Based on our observations in  gure 4(b),  r;1 remains fairly constant throughout the evolution of the SRN, and can be learnt as a model parameter.
If an item already rated by direct neighbors is being rated, then the probability of item i being rated is as follows: Pt(iju, St) = j INu (ft(jju) +  4) (11) where ft(iju) is the frequency of item i appearing in the set of items rated by direct neighbors of u.
To compute the probability of rating the item by value r (denoted by Pt(rju, i,St)), we use the prior knowledge of general probability of rating i by value r combined with the distribution of rating values on i among direct neighbors u as follows:   ft(iju) +  4 Pt(rju, i, St) / + Pe(rji, St) (12)   ft(rji, u) +  5 r  (ft(r ji, u) +  5) In the above equation, Pe(rji,St) is the prior probability of rating item i by value r as de ned in equation 11. ft(rji, u) is the frequency of rating value r for item i among ratings expressed by friends of u for item i.
It should be noted that since the ratings are binary in Flickr, models for rating values (equations 11 and 13) apply to Epinions only.
In Flickr, all rating values are 1.
With probability (cid:8)r;1 = (1 (cid:0) (cid:8)r;4)(1 (cid:0)  r;3)(1 (cid:0)  r;1), the rating action selects the item from one of the items rated by top similar users to u.
The process for rating an item in this case is similar to the process of rating an item rated by direct neighbors of u in the social network.
Ps(iju,St) and Ps(rju, i,St) are de ned in a way similar to the de nition of Pt(iju,St) and Pt(rju, i,St).
In this section, we present our approach to learn the parameters of our model.
As discussed above, parameters of our model include 10 smoothing parameters ( 0... 9), 15 parameters for power law functions (a1, b1, c1...a5, b5, c5),  , and  t;1, r;1.
We denote the set of all parameters by (cid:2).
We compute the likelihood of the ratings and social relations observed in the data set under our model, and resort to maximum likelihood (ML) estimation to learn the values of the model parameters.
We consider the network generation from the very beginning, and maximize the likelihood of the observed sequence of social and rating actions.
From the start time to the end time T , we observe K actions which transform the SRN from the state S0 to the state ST .
St denotes the state of the SRN at time t which summarizes the effects of all actions performed up to this time.
Let A denote the sequence of all actions performed between times 0 and T , in which the actions are sorted according to their timestamps.
We denote each action in A by ak and its timestamp by tk, where k 2 [1..K].
Based on the chain rule, the likelihood of the model is the product of the probabilities of each individual action in A given the previous actions: P (AjS0, (cid:2)) = P (akjStk , (cid:2)) (13)
 k=1 [ (cid:8)t;4gn(vjSt)+ For the two types of actions (social actions, rating actions), we compute the likelihood of the action in a different way.
The probability of selecting a user u, and performing a social action Tu;v to create a social relation between user u and user v is: P (Tu;vjSt, (cid:2)) = P (ujSt) (cid:2)   (cid:2) (1 (cid:0) (cid:8)t;4) t;3Pe(vju, St) + (1 (cid:0) (cid:8)t;4)(1 (cid:0)  t;3) t;1Pt(vju, St) (14) + (1 (cid:0) (cid:8)t;4)(1 (cid:0)  t;3) t;2Ps(vju, St) ] where gn(vjSt) is an indicator of whether v is a new user.
Likewise, the likelihood of an action Ru;i;r in which the user u gives the rating r for item i is: [ P (Ru;i;rjSt, (cid:2)) = P (ujSt) (cid:2) (1 (cid:0)  )(cid:2) (cid:8)r;4gn(ijSt) r + (1 (cid:0) (cid:8)r;4) r;3Pe(iju, St)Pe(rji, u, St) ] + (1 (cid:0) (cid:8)r;4)(1 (cid:0)  r;3) r;1Pt(iju, St)Pt(rji, u, St) + (1 (cid:0) (cid:8)r;4)(1 (cid:0)  r;3) r;2Ps(iju, St)Ps(rji, u, St) (15) where gn(ijSt) is an indicator of whether i is a new item.
We use expectation maximization (EM) to estimate the maximum likelihood model parameters.
There has been a lot of research on modeling the evolution of social networks [7][9] [10][13].
However, these works only model the creation of social relations and do not consider attributes for nodes.
In the following, we review some recent works which address the problem of modeling the evolution of social networks together with node attributes.
[3] introduces a evolution model for social networks with user activities.
In the Wikipedia dataset used in their experiments, activities are the editing of a certain Wikipedia article, and network edges represent interaction, i.e. participation in the discussions on another users s pro le.
The generative model of [3] considers only two factors: social in uence and selection.
plored by [18].
In this scenario, nodes are associated with group labels.
The proposed model creates edges and group labels.
For each user, groups to join are selected from those of his friends (social in uence), and new friends are selected from his friends of friends (transitivity).
However, the effects of selection and correlational in uence are not modeled.
Like our work, [11] investigates social networks with user ratings.
Similar to our work the bidirectional effects between trust and ratings are explored, but only selection and correlational in u-ence are considered.
The effect of social relations on the behavior of users is not discussed in this paper.
Evaluating generative models and the  t of synthetic networks with actual networks is an important issue in designing models for the evolution of social networks.
In the following we review two recent works which investigate evaluation metrics for generative models.
[1] addresses the problem of distinguishing social in uence (causation) from correlation.
A shuf e test is proposed based on the intuition that if social in uence is not a likely source of correlation in a system, timing of actions should not matter, and therefore reshuf- ing the time stamps of the actions should not signi cantly change the amount of correlation.
They also de ne a metric for measuring social correlation.
If the social correlation measure does not change after shuf ing, then social in uence is ruled out as a cause of social correlation.
The authors of [8] present a systematic examination of a real network dataset using maximum likelihood estimation for exponential random graph models as well as new procedures to evaluate how well the models  t the observed networks.
These procedures compare structural statistics of the observed network with the corresponding statistics on networks simulated from the learnt model[8].
All metrics in this paper measure some structural property of social networks.
Attributes of nodes are not considered.
The microscopic evolution of social networks is investigated in [10].
The authors argue that using the likelihood is a more objective measure for comparing alternative generative models than using some of the many potential relevant network statistics.
Only simple social networks without attributes and only the in uence of transitivity are considered.
The timing of the creation of nodes and edges is also modeled, which is beyond the scope of our work.
In this section we present our experiments and discuss the results.
To evaluate the performance of our model, we build a generative model for each data set, learning the parameters using maximum likelihood and expectation maximization.
We used the version of the Epinions data set3 published by the authors of [17].
The data set contains 22K users, 30K items, 108K ratings, and 117K social relations between users.
The timestamps in the data set range from 2001/01/17 to 2002/02/01.
Flickr.com is an online photo sharing website.
We used the version of the Flickr data set4 published by authors of [2].
The Flick data set used in this paper contains 150K social relations and 30K rating actions expressed by 5.2K users on 5K items.
The timestamops in the  ickr data set are from 2206/11/02 to 2007/03/15.
In our experiments, we compare the model proposed in section 4, called the FullModel, against the following models which capture only some of the effects: 3http://alchemy.cs.washington.edu/data/epinions/ 4http://socialnetworks.mpi-sws.org/ (cid:15) CrossModel.
This model considers only the effect of ratings on social relations (selection), and the effect of social relations on ratings (social in uence).
This model is similar to [3], and is derived by removing the parameters (cid:8)r;2 and (cid:8)t;1 from the FullModel (or setting these parameters to zero in the FullModel).
It should be noted that this model considers social in uence and social selection to be constant.
(cid:15) SocialOnly.
It ignores the effects of similarities, i.e. it just models the effects of social in uence and transitivity.
This model is derived by removing parameters (cid:8)r;2 and (cid:8)t;2, from the FullModel.
This setting simulates the model proposed by [18] in our framework.
It should be noted that the model in [18] ignores the dynamic nature of effects.
(cid:15) SimilarityOnly.
It ignores the effects of social relations and just models selection and correlational in uence.
This model is derived by removing the parameters (cid:8)r;1, (cid:8)t;1 from the FullModel.
Results of this model show whether considering only effects of similarity and correlation of rating patterns can capture the behavior of real data.
(cid:15) Baseline.
In this setting, we ignore all four bidirectional effects of social relations and rating patterns.
This model is derived by removing the parameters (cid:8)r;1, (cid:8)t;1, (cid:8)r;2 and (cid:8)t;2 from the FullModel and is designed to investigate the power of randomness in SRN generation.
This model is close to the preferential attachment model[15].
In this section, we present our experimental results with respect to different evaluation metrics.
It should be noted that we generate
 metric over these 10 generated SRNs.
Each generated SRN consists of the same number of actions as the real data.
After learning the parameters, some interesting insights can be gained on the behavior of users in Epinions and Flickr.
The estimated value of   is 0.52 for Epinions and 0.83 for Flickr.
This indicates that in the Flickr data set, users tend to create more social relations compared to adding photos to their favorites list.
The estimated value of  t;1 is 0.91 for Epinions and 0.9 for Flickr which means that the effect of transitivity is much more important than selection in both data sets.
In other words, ignoring the effect of friends of friends on the creation of social relations (as done in [3]) is not realistic.
For rating actions, we have  r;1 = 0.59 for Epin-ions and  r;1 = 0.54 for Flickr which shows that the strength of social in uence is close to the strength of correlational in uence with social in uence being a little stronger in both data sets.
In the following subsections we evaluate comparison partners against several evaluation metrics.
As discussed in [10], using the likelihood of the real data is an objective measure for comparing alternative models.
Table 1 lists the log-likelihood of Epinions and Flickr for all of the comparison partners.
The FullModel achieves the clearly highest log-likelihood in both data sets, while the Baseline model, that ignores all four bidirectional effects, achieves the lowest likelihood.
As proposed in [8], we evaluate a generative model for social rating networks based on some structural properties of the generated graph.
We compare the following measures of the generated SRN with those of the real SRN datasets in both Epinions and Flickr.
Flickr Model FullModel CrossModel SocialOnly SimilarOnly Baseline Epinions









 Table 1: Comparison of the log-likelihood of the Epinions data set and the Flickr data set using alternative models.
(cid:15) Link Degree Distribution: The distribution of the out-degree of nodes.
(cid:15) User Rating Degree Distribution: The rating degree of a user is the number of items rated by him.
(cid:15) Item Rating Degree distribution: The rating degree of an item is the number of users who have rated the item.
Our experiments show that all the above distributions follow a power law.
For each model, we compute the scaling exponent5 of each distribution and compare it to the corresponding scaling exponent in the real dataset.
Table 2 compares the scaling exponent of different degree distributions for both Epinions and Flickr.
Note that the scaling exponents for all models are very close.
We believe this is mainly due to the fact that all models exploit the idea of "rich get richer".
Thus all the comparison partners are generating SRNs close to the real data in terms of degree distributions.
Structural Measure Link Degree User Rating Degree Item Rating Degree Epinions Flickr Model


 Real Model





 Real


 Table 2: Comparison of the scaling exponent of each degree distribution of the SRN created by FullModel and the real data for both Epinions and Flickr.
Another metric we use is the effective diameter [15] of the social network.
All comparison partners generate social networks with effective diameter of 6 in Epinions and 4.8 in Flickr, which are the same as the effective diameters of the real data set.
To conclude, evaluation on general structural properties showed that all models generate SRNs that are generally similar to the real data set.
We use an in uence model proposed in [1] to compare the degree of in uence in SRNs generated by the various models and the real data set.
At each timestamp t, each user u is exposed to some items.
A user u is k-exposed to an item i at time t if that individual has not rated item i and has exactly k (cid:21) 1 direct neighbors who have rated i by time t and the latest rating of i among the direct neighbors of u is in the interval [t(cid:0) 0,t].
Each item i is exposed to u at timestamp t by au;i;t users.
The probability P (u, i, t) of user u rating item i in a time window of size   after t is modeled as follows: P (u, i, t) = e(cid:11) ln (au;i;t+1)+(cid:12) 1 + e(cid:11) ln (au;i;t+1)+(cid:12) (16)
 Let Au;t denote the set of items user u has not yet rated but is exposed to at time t. Then we can compute the likelihood of the given data D as follows:      
 t u i Au;t P (u, i, t)Yu;i;t (1 (cid:0) P (u, i, t))1 Yu;i;t (17) where Yu;i;t is a boolean random variable with a value 1 if user u rates item i in the time window [t,t+ ]6.
By maximizing the above likelihood we estimate the values of   and  .
As discussed in [1], the coef cient   is considered as the measure of in uence by the neighbors for selecting an item to rate: ln( P (u, i, t)
 ) =   ln (au;i;t) +   We call this in uence coef cient the item adoption in uence since only the event of rating an item (but not the value of the rating) is taken into account.
We can also model the probability P (u, i, t) of user u rating item i within distance 0.5 of the average of ratings of his neighbors on i.
We call this in uence coef cient the rating adoption in uence.
The social in uence measures for different models and the real data set are presented in table 3.
Note that since ratings in Flickr have binary values, rating adoption in u-ence is not applicable to Flickr.
As shown in this table, FullModel has the social in uence measures that are closest among all comparison partners to those of the real data set in both Epinions and Flickr.
Surprisingly, the SimilarityOnly model that uses only the effect of similar users comes fairly close to the real data set in terms of social in uence coef cients in both data sets.
All other models exhibit social in uence coef cients that are much smaller than in the real data set.
These results show that correlational in uence play a very important role in rating behavior of users and neglecting it is not realistic.
Model Real Data FullModel CrossModel SocialOnly SimilarityOnly Baseline item adoption in uence





 Epinions rating adoption in uence





 Flickr item adoption in uence





 Table 3: In uence coef cients for item and rating adoption in the social rating network generated by different models and the real data set in Epinions and Flickr.
growth of similarity of rating patterns When user u creates a social relation to user v, then according to social in uence, u will consider ratings of v in his future actions.
Thus, the similarity of ratings of users u and v should grow
 our experiment to compute the exposures in Epinions (2001/02/17, 2001/03/17, ... 2002/01/17).
  and  0 are set to 30 days in our experiments with Epinions.
In Flickr, we consider 8 timestamps (2006/02/15, 2006/03/01, ..., 2007/03/01).
  and  0 are set to 15 days more similar they are supposed to get.
The difference between the similarity of u and v at the end of the evolution of the SRN and at the moment of creating the social relation is called the similarity growth for users u and v. In our SRN, users may perform different numbers of actions after creating a social relation.
We group pairs of users (u, v) based on the number of rating actions u performs after creating the social relation to v. Figure 6 shows the similarity
 Transitivity of social relations is an important property which affects the creation of social relations between users.
The distribution of the shortest distance between users u and v, at the moment when u creates a social relation to v, can measure the transitivity effect.
If the probability of short distances (i.e. 2) is high, then the transitivity has been an in uential factor in trust creation.
We compute the average shortest distance of pairs of users at the moment of creating a social relation between these two users.
Table Figure 6: Comparison of Similarity Growth after creation of social relation for different models in Epinions.
growth versus the number of actions for the different models on the Epinions data set.
The FullModel follows the pattern of similarity growth in the real data more closely than other models.
There are some interesting and surprising results in Figure 6.
The Simi-larOnly and CrossModel tend to have higher growth of similarity compared to the real data, while SocialOnly tends to have a lower growth of similarity compared to both real data and FullModel.
SimilarOnly and CrossModel use selection for link creation, but SocialOnly uses the transitivity for link creation.
The similarity growth versus the number of actions for the different models in the Flickr data set is depicted in  gure 7.
Again FullModel has the closest pattern of similarity growth to that of the real data.
In a way, the results show that users who are already similar before creating a social relation, tend to get more similar compared to users who are not that similar when creating the social relation.
FullModel is a tradeoff between these two cases and our experiments show that it behaves much more similar to the real data.
Figure 7: Comparison of Similarity Growth after creation of social relation for different models in Flickr.
Model Real Data FullModel CrossModel SocialOnly SimilarOnly Baseline dmin Epinions





 Flickr





 Table 4: Average shortest distance of user pair at the moment of creating social relations (dmin) in different models and the real data set for Epinions and Flickr.
4 compares the average shortest distance of user pairs at the mo ment of creating social relations (dmin) in different models and the real data set for both Epinions and Flickr.
Note that pairs of users who are not reachable at the time of the creation of a social relation are considered to have distance 7.
As shown in this table, the average shortest distance for FullModel is the closest one to that of the real data set.
SocialOnly achieves lower average distance since it only relies on neighbors and does not consider the selection effect.
CrossModel, SimilarityOnly, and Baseline have a higher average shortest distance, likely because they are ignoring transitivity which according to our experiments is a very important factor in the creation of social relations.
To evaluate the effect of selection, we compute the average similarity of users when creating a social relation.
Table 5 presents the average similarity of user pairs at the moment of creating social relations for different models and for the real data in both Epinions and Flickr.
In this table, we only consider the pairs of users for which we can compute the similarity.
Table 5 also shows the percentage of user pairs for which we can compute the similarity in each comparison partner.
Again, FullModel is clearly the closest to the real data set in both Flickr and Epinions.
CrossModel and SimilarOnly have higher average similarity since they only rely on similar users for creating social relations and ignore the transitivity effect.
The SocialOnly model, however, also has an average similarity close to that of the real data set.
This seems to be due to the fact that strength of selection in Epinions and Flickr is very low compared to transitivity.
The FullModel is also closest to the real data set in terms of the percentage of user pairs creating social relation for which we can compute the similarity.
Social rating networks (SRN) are becoming more and more important in reviewing websites such as Epinions.com or online sharing websites like Flickr.com.
In this paper we analyzed and modeled the temporal behavior of users in an SRN using bidirectional effects of rating patterns and social relationships.
Our model is based on our observations of the behavior of user while express-Real Data FullModel CrossModel SocialOnly SimilarOnly Baseline Epinions Average Similar-ity





 % of nonzero similarity pairs





 Average Similar-ity





 Flickr % of nonzero similarity pairs





 Table 5: Average similarity of user pairs at the moment of creating social relations in different models and the real data set for both Epinions and Flickr.
ing ratings or creating social relations.
While existing models for other types of social networks have captured some of the factors, our model is the  rst one to represent all four factors, i.e. social relations-on-ratings (social in uence), social relations-on-social relations (transitivity), ratings-on-social relations (selection), and ratings-on-ratings (correlational in uence).
Base on our observations, these effects are dynamic.
In other words, the strength of each effect is not constant throughout the evolution of an SRN.
We analyzed and modeled the temporal dynamism of these effects by de ning them to be functions of the dynamic features of an evolving SRN.
Given the sensitive nature of social network data, there are only very few public SRN datasets.
This motivates the development of a model to capture the temporal dynamics of users  behaviors and to create such synthetic datasets for research purposes.
To evaluate the accuracy of our model, we compared the synthetic SRN generated by our model with the real data and with SRN generated by other models that have been proposed in the literature.
Our experimental study on the Epinions dataset and the Flickr dataset demonstrated that the proposed model produces social rating networks that agree with real world data on a comprehensive set of evaluation criteria much better than existing models.
These criteria included the relevant degree distributions and measures of the four major in uence factors that we identi ed for social rating networks.
In addition, our experimental study provided interesting insights into the factors driving the evolution of SRNs.
In particular, we found that transitivity plays a much bigger role in the creation of social relations than selection, although the most closely related generative model [3] does not even consider transitivity.
We would like to mention a few directions for future research.
As most existing generative graph models, we adopt a discrete time concept.
However, a continuous time concept and a corresponding model of the interaction times, similar to that proposed in [10] and [18], may further improve the faithfulness of the generated data.
Furthermore, the use for inference purposes, e.g.
for link prediction, is one of the motivating applications of generative models and should be explored.
