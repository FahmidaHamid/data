Online social systems and knowledge-sharing sites have attracted much attention as viral marketing media.
People share their experiences and opinions about products and services in their blogs and knowledge-sharing sites [1].
Many Copyright is held by the International World Wide Web Conference Committee (IW3C2).
Distribution of these papers is limited to classroom use, and personal use by others.
studies have undertaken analyses of opinions in the blogo-sphere [16, 2].
Regarding knowledge-sharing sites, relations among customers are analyzed in various ways.
An early study by M. Richardson and P. Domingos provides a method to calculate a network value of online customers [20].
The network value of a customer is high when the customer is expected to in uence other users  probabilities of purchasing the product both strongly and positively.
Actually, D. Kemp et al. follow this problem using several widely studied models in social network analysis.
The optimization problem of selecting the most in uential customer is NP-hard.
They provide a provable approximation for e cient algorithms [12].
A recent report describes techniques that decompose the reviews into segments that evaluate the individual characteristics of a product, such as image quality and battery life for a digital camera [4].
Revenue maximization (instead of in uence maximization) is proposed and optional pricing strategies in social networks are discussed [11].
Information about customer experiences  ows through social relations.
Users share their experiences with their friends and colleagues.
They might exchange that information with their friends online [22].
J. Leskovec et al. analyze recommendations among Amazon.com users [13].
Their results show how the recommendation network grows over time.
Moreover, they describe its e ectiveness from the viewpoints of the sender and the receiver of the recommendations.
Users might trust some people more than others, and might therefore be more in uenced by them [6].
Even if a certain user might make many recommendations, such a person s in uence is limited: Users neither trust, nor are they in uenced by, such a person [13].
J. Golbeck et al. [8, 25] describe that the similarity of pro le attributes (such as ratings of movies) induces trust among people.
They analyzed data from FilmTrust,  nding that several pro le features beyond overall similarity a ect the degree to which subjects trust other users.
Another characteristic of trust is transitivity: If A trusts B, and B trusts C, then A can be inferred to trust C to some degree.
The calculation is validated through experimental studies.
Guha et al. develops a framework of a trust propagation scheme, and with it evaluates a large trust network using Epinions data.
Their results show how trust and distrust exert considerable e ects on trust propagation [10].
Considering those studies of the degree to which trust is formed, bidirectional e ects on users  trust and ratings are readily apparent.
  Rating to trust: Users put trust in other members because their ratings match another user s ratings.
users  opinions in a community are useful for decision-making.
The community gravity e ect is observed.
  We propose a potentially useful measure to characterize a community.
We identify a situation in which the online community becomes more clustered: trust and opinion have strong mutual e ects.
The paper is organized as follows.
In the next section, we provide an overview of the @cosme site.
Then, we propose our model of trust and rating in Section 3.
Experimental results are presented in Section 4, where two classi cation problems are addressed.
After contrasting the results with those of the theoretical model, we propose a new measure for community gravity in Section 5.
The network characteristics are described to underscore the e ectiveness of that new measure.
Finally, before concluding the paper, we present discussion of the results and implications.
Since its opening in December 1999, @cosme has acquired a growing number of users: as of Spring 2007, it had 825 thousand registered users, and 175 million page-views per month.
According to the operator (istyle Inc.), it is intended to be a  viral marketing  site related to cosmetics.
Users of @cosme can post their reviews (called Kuchikomi) on cosmetic products (100,500 items of 11,000 brands) on the system.
A review consists of a text describing the experience and the rating (from 1 (bad) to 7 (good)) of the product.
We do not use text messages for this study; instead, we use a review and a rating interchangeably in this paper (when not confusing).
Figure 2 portrays the top page of the site.
A visitor can select a product and see reviews about it.
She can also browse other products using the hierarchical classi- cation of products or clicking reviewers  other reviews.
Once a user registers to the site, she becomes able to log in to the system.
She is directed to a personalized page called  MyPage.  News related to favorite brands and latest reviews announced by her trusted persons (Okiniiri) are shown.
A user can bookmark the reviewer as Okiniiri if she  nds someone s review trustworthy and useful.
We use Okiniiri as a (directional) trust relation.
The reviewer is no-ti ed that she has acquired a new user who registered her as Okiniiri; in other words, she has acquired a new fan.
The system ranks users according to their respective quantities of fans.
Apparently, some users are extremely motivated to accumulate more fans.
Figure 3(a) portrays the newly added reviews, new bookmarks, and new users for each month since the site s opening.
The number of users has grown steadily, as have the numbers of trust relations and reviews.
We were provided the o cial user log data for more than  ve years: December 1999   April 2006.
The data consist of the following three tables 2.
Product review (Kuchikomi) 4,310,346 records with user id, product id, date, and rating (1 (bad)   7 (good)).
Figure 1: Sequential model of the trust e ect and the homophily e ect.
  Trust to rating: The rating of a user is in uenced by the opinions of trusted others.
This bidirectional interaction of trust and opinion can be considered to be ubiquitous in the real world.
People in similar cultures  ock together: they are in uenced by each other; moreover, they actively strive to make the culture unique.
This phenomenon by which  similar  people gather is understood as homophily in the context of social network analysis [24, 18].
Singla and Richardson were able to discern a strong relation between who talks to whom on the instant messaging network, and what they search for, which is an illustrative example for understanding homophily s prevalence on the internet [21].
Online social media readily induce people to  ock together.
Consequently, the characteristics of this phenomenon are necessary for mining and analyzing online social communities.
Figure 1 depicts an illustration of bidirectional e ects.
In the  rst step, a user buys a product (shown as a music note) and another user is trusting her.
She will adopt the product (in step 2), which will increase the homophily e ect (in step
 two users.
As described in this paper, we analyze a knowledge-sharing site called @cosme (www.cosme.net).
It is the largest online community site of  for-women  communities in Japan1, and provides information and reviews related to cosmetic products.
Notable characteristics of @cosme are that a user can register other users who can be trusted; she can also post reviews of products.
The trusted users are called Okiniiri by her, which signi es a feeling of both favor and trust.
Data of more than 700 thousand users gathered over  ve years enables us to analyze the bidirectional interaction of trust and opinions: (i) How does a user put trust in others from the similarity of ratings?
(ii) What e ects does that trust have on users  purchase behavior and ratings?
We also conducted experiments on the Epinions dataset, which consists of both a trust network and user ratings of products.
We designate the bidirectional e ect as community gravity because it represents the power to induce users to the community.
We believe that this analysis provides important insights for understanding various online social media.
The contributions of the paper are summarized as follows:   The bidirectional e ects of trust and opinions are analyzed both theoretically and empirically.
Cosmetic
 female.
#reviews









 product name eyelash curler nail polish deep cleansing oil hair oil Ohshima Tsubaki cleansing oil eye shadow eyelash curler liquid foundation petroleum jelly skin conditioner









 #reviews #new bookmarks #new users






 Figure 2: Screenshot of the top page at @cosme.
t n u o







 "res_dist.txt"

 Number of reviews

 Trust relation (Okiniiri) 530,598 records with user id, (her trusted) user id, and date.
User pro le 670,040 unique users with user id, registration and birth date, type of skin.
These personal pro les are visible to others.
All the users have their personal pro les, which are available for use in our analyses.
We introduce some additional information related to the data.
Among 4,310,346 reviews overall, 72,522 products have at least one review.
Therefore, one product has, on average, 59.4 reviews, which is quite a large number, re ecting high activity among users in the community.
About one-third of users have written at least one review.
On average, a user posts 6.43 reviews.
A user who posts at least once writes 20.47 reviews, on average.
Table 1 shows the most-reviewed products.
Low-priced and commonly used products are listed higher, such as nail polish, cleansing oil, eye shadow, and lotion.
The most active user (i.e., the user with the largest number of reviews) has posted 2179 reviews during the four years since 2002, which is about 1.5 reviews per day.
The distribution of the number of reviews apparently conforms to a power law, as depicted in Fig. 3(b).
A strange gap separates x = 9 and x = 10, which might be attributable to the fact that a user with 10 or more reviews can use a personalized recommendation function by the system.
This minimum requirement motivates users to post 10 or more reviews.
The entire set of 530,598 trust relations comprises 49,685 users targeting 61,556 users.
In other words, 7.4% of users use the bookmark function at least once, and 9.2% of users are trusted by others.
On average, 10.7 trust relations are made by single users who have used the trust function at least once.
It is particularly interesting that the correlation between the number of fans and the number of her trusted users is not high: the Spearman correlation between the number of (a) Numbers of new users, new bookmarks, and new reviews per month.
(b) Numbers of reviews by users and their counts.
t n u o







 "res_dist_okini.txt" t n u o









 Number of bookmarks

 "res_dist_okini_in.txt"



 Number of (in-)bookmarks (c) Outdegree distribution of bookmarks.
(d) Indegree distribution of bookmarks.
Figure 3: Overview of the network data on @cosme fans and the number of reviews is as high as 0.658, but that between the number of fans and the number of her trusted users is only 0.067.
Figures 3(c) and 3(d) portray the degree distributions when considering a trust relation as a directed edge.
Both exhibit a linear relation on log log plots.
Bidirectional interaction of trust and rating can be understood as follows: In the  rst step, a user buys a cosmetic product and another user is trusting her.
She will adopt the product, which will increase the homophily e ect.
Then, the new product can easily di use between the two users.
Figure 4 portrays a community with strong gravity if we examine phenomena on a community scale.
A product is diffused through the trust network, which will result in more tightly connected community.
Consequently, the new product can easily di use within the community, which will strengthen the community further.
A user will be induced to join the community if she is connected to the community.
This e ect resembles gravitational force.
For that reason, we designate it as community gravity in this paper.
If no bidirectional e ects pertain in the community, the tx,y(t + 1) =  0tx,y(t) +  1sim(sx,I (t), sy,I (t)) (2) Therein, tx,y(0) is the original trust from user x to user y.
A set of items is denoted as I, and sx,I (t) is the vector of rating sx,i(t) (i   I).
A function sim( ) is used to calculate the similarity between two vectors (e.g., cosine similarity and inner product), and  0 and  1 are constants3.
We can also write the expression using matrices, as t XSt, Tt+1 =  0Tt +  1ST where X is a (Mahalonobis distance) matrix to calculate the distance.
Below we use an inner product as a similarity measure for simplicity.
As described later, cosine similarity functions well as a similarity measure.
The inner product corresponds to cosine similarity if we assume that the vector s is normalized so that the vector length would be 1.
Formula 1 and Formula 2 are mutually dependent.
If we solve the two formulae, we can obtain4



 z Nx(t),z(cid:3)=y
 i I sy,i(t)2.
Figure 4: Strong gravity community vs. other communities.
tx,y(t + 1) =
 Kxy(t)  1 1 |Nx(t)| tx,z(t)sy,i(t)sz,i(t) interaction is simpler.
In Fig. 4, the interaction of a trust-e ective community is shown: a product can be di used well through the trust network.
Another product might be di used similarly, but no cumulative e ect occurs.
On the other hand, in the homophily e ective community, similar users will share mutual trust.
However, unless a trust relation has an e ect on the di usion of a product, a product neither di uses through the network, nor does the community become stronger.
Therefore, to understand the community dynamics, it is important to consider e ects from trust to rating and vice versa.
First, to show how a community grows with strong community gravity, we model the interaction between rating of a product and trust relation.
The rating of user x on product i at time t, denoted as sx,i(t) (0   sx,i(t)   1), is fundamentally determined by the preference of user x to product i.
It is also in uenced by the rating of other users that user x trusts.
Therefore, we model the rating as the summation of her original evaluation sx,i(0) and the ratings of users she trusts.
We denote the users who are trusted by user x as Nx.
y Nx(t) sx,i(t + 1) =  0sx,i(t) +  1
 tx,y(t)sy,i(t) (1) In the equation presented above, tx,y(t) represents the trust value [0,1] of user x to user y at time t and  0 and  1 are constants.
We divide the rating of trusted users by the number of her trusted users |Nx(t)|, thereby taking the average of ratings.
(Otherwise, if a user trusts more users, her original evaluation is less weighted, which seems unreasonable.)
We can write the expression in a more general form as St+1 =  0St +  1TtSt = ( 0I +  1Tt)St where St = {sx,i(t)} and Tt = {tx,y(t)/|Nx(t)|}.
Second, we model the trust relation of a user to another user based on the similarity of ratings.
As described in [9], trust is induced by the similarity of ratings between two where Kxy(t) = 1    1 1 |Nx(t)| This formula shows that the trust of user x to user y is determined by the similarity of the rating and also the similarity among y to the other users.
It is apparent that Kxy becomes large if s(y, i) gets large, meaning that users with good ratings on many items might be less trusted.
Similarly, we can obtain sx,i(t + 1) =
 Kxy(x)  1 2 |Nx(t)|2

 y Nx(t)
 z Nx(t)z(cid:3)=y tx,z(t)sy,i(t)2sz,i(t).
This formula is complex, but we can understand it as follows: we assume that user x increases her rating on product i with  sxi.
Then, tx,y increases by  1 sxisy,i; if user y has a high rating on product i, the increase on sx,i increases the similarity, resulting in the increase of trust tx,y.
If user y has a low (or zero) rating on product i, it does not bring much of an increase (sometimes even a decrease) of tx,y
 Eventually, sx,i(t) is increased by  1 1 |Nx|  sxisy,i(t)2.
(3) Therefore, an increase of rating sx,i again brings the increase of rating sx,i itself by order of  1 1s(y, i)2/|Nx(t)| through neighboring user y.
The user eventually obtains a higher increase on sx,i(t) if user x has many neighbors with a high
 trust values of more distantly related users, as described in a previous study [9, 10].
However, because similarity measures usually have some transitivity, we use no explicit formulation of transitive trust.
sx,i(0) = 0.
Complete formulae will be found in the longer version of the paper.
sy,i(t) is low, tx,y(t) actually decreases.
similar if they are closely connected, thereby producing a cluster of users with similar preferences.
Depending on product and user characteristics,  1 and  1 di er.
The opinions of users on a particular product tend to be similar locally, which produces denser clusters than those for other products.
For the discussion presented in this section, we take a practical approach to analyze bidirectional interaction between trust and rating.
By empirically examining each interaction, we can support the model of the previous section.
We build two prediction problems: prediction for trust and prediction for rating of the product.
Trust prediction is, given two users x and y, to predict whether a trust relation from x to y exists.
It can be considered as a link prediction problem [7].
We use the features based on two users  pro les, product ratings, and other trust relations.
Rating prediction is complementary: given a user and a product, we seek to predict the rating.
Features are generated using her pro le, her ratings of the other product, then her trusted users.
Both problem resolutions produce a prediction based on the data before the time point.
Models to predict trust and ratings are learned using classi cation algorithms.
To predict the trust from user x to user y, we use features of three kinds: each corresponds to a table in @cosme data.
The overall features are presented in Table 2.
The  rst type of feature is based on a pro le table; we use the properties of user x and user y, along with the properties  di erence and correspondence.
The second type of feature uses the product-review table.
The features are invented to measure the similarities of ratings of user x and user y on various products.
For example if user x announces ratings on  ve products, then {(P1, 6), (P2, 4), (P3, 5), (P4, 2), (P5, 7)}, where Pi represents product i annotated using a rating of an integer [1,7].
Assume that user y makes ratings of four products: {(P1, 5), (P2, 5), (P6, 7), (P6, 3)}.
Then, we can calculate the similarity using various measures.
In this case, P1, P2, and P5 are rated by both users.
Therefore, the matching coe cient is three.
The value is 3/ 5 = 0.67 if we perform calcula- tions using cosine similarity, denoting a set of items rated by user x as Ix.
The three measures we use are the following: (i) Matching coe cient: |I(x)   I(y)|, (ii) Cosine similarity: |I(x)   I(y)|/(|I(x)||I(y)|), and (iii) Jaccard coe cient: |I(x)   I(y)|/|I(x)   I(y)|.
We also use (iv), a product for which I(x) is considered as a vector, and calculate I(x)   I(y).
 
   Users might refer to reviews with good ratings more often, or reviews with a bad rating more often.
Therefore, we de ne a set of items with good/bad reviews as Igood(x) and Ibad(x) correspondingly.
We de ne a good rating as one with a score of 6 points or more; a bad rating has 2 points or less.
In the example, user x assigns a good rating on P1 and P5, whereas user y assigns a good rating to P7.
Then, we can de ne the overlap of Igood(x) and Igood(y), or Ibad(x) and Ibad(y) as well.
Users might not be familiar with a product.
However, sometimes they make a purchase decision based on a brand or manufacturer.
Users often have several preferred brands or manufacturers.
Therefore, we can calculate the overlap of rated items as categorized by brands, or as categorized by manufacturers.
Overall, we have 4 (#measures)   3 (#sets)   3 (product/brand/manufacturer) = 36 features.
z Nx Ny The third type of feature is derived from trust relations (except the very relation from x to y, which we seek to predict).
Following the link prediction study [15], we build the following attributes: (i) the number of neighbors for user x and y, (ii) distance on the network, (iii) common neighbors of user x and user y, (iv) Jaccard coe cient of neighbors of user x and y, (v) Adamic Adar, which is de ned log |N (z| , and (vi) preferential attachment, de-as  ned as |Nx||Ny|.
The trust network comprises trust relations of both directions (where we regard the trust relation from x to y as identical to trust relation from y to x), single relations (where we distinguish the relation from x to y and the relation from y to x), and reciprocal relations (where we put a link from x to y if a trust relation from user y to user x exists).
Therefore, we have three networks associated with respective features.
We randomly chose 1000 pairs of users with trust relations and another 1000 pairs of unrelated users without relations; they correspond respectively to positive and negative sets.
We used a support vector machine (SVM) with a linear kernel [23] as a classi er6.
Table 4 shows the performances of classifying trust relations.
Each group of attributes contributes to the classi cation.
Trust features and ratings features contribute greatly to the performance compared to pro le features.
The F1 value is 82.46% if we use all three groups.
Table 5 shows features with the highest weights in the obtained model by the SVM classi er.
It is apparent that the number of trusted users for y and the number of trusted users by x are the two highest features, which might be readily apparent.
Highly trusted users are likely to be trusted using a particular user; a user who trusts many others is likely to trust another.
Some features in the table are of particular interest: Jaccard-directional is the overlap of user x s trusted users and trusted users by user y, which implies the transitivity of trust relations.
The all-product-cos is the similarity of all rated items by user x and those by user y.
This can be understood that the similarity can be well measured using the cosine of the rated product.
Next, we build the rating prediction problem.
The features we used, as presented in Table 3, are categorized into pro le, rating, and trust, as well as trust prediction.
Considering the rating by user x of product i, the pro le features are simply the properties of user x.
The rating features are the number of ratings by user x, the average
 and Naive Bayes.
They produced similar results overall.
The results worsen by a few points.
Group Pro le Rating type skin profession age history good rating bad rating all rating stats stats graph similarity Trust bad-brand-product, bad-brand-cos, bad-brand-matching, features skin-same (binary), skin-X (category), skin-Y (category) profession-same (binary), profession-X (category), profession-Y (category) age-X, age-Y, age-dif history-X, history-Y, history-dif good-product-matching, good-product-product, good-product-cos, good-product-Jaccard, good-brand-matching good-brand-product, good-brand-cos, good-brand-Jaccard, good-manufacturer-matching, good-manufacturer-product, good-manufacturer-cos, good-manufacturer-Jaccard bad-product-matching, bad-product-product, bad-product-cos, bad-product-Jaccard, bad-brand-Jaccard, bad-manufacturer-matching, bad-manufacturer-product, bad-manufacturer-cos, bad-manufacturer-Jaccard all-product-matching, all-product-product, all-product-cos, all-product-Jaccard, all-brand-matching, all-brand-product, all-brand-cos, all-brand-Jaccard, all-manufacturer-matching, all-manufacturer-product, all-manufacturer-cos, all-manufacturer-Jaccard review-n-X, rating-ave-X, rating-std-X, review-n-year-X, popularity-X, over6-X, under2-X, review-n-Y, rating-ave-Y, rating-std-Y, review-n-year-Y, popularity-Y, over6-Y, under2-Y trusted-n-X, trusting-n-X, trusted-n-Y, trusting-n-Y distance common-neighbors-directional, common-neighbors-reverse, common-neighbors-undirectional, Jaccard-directional, Jaccard-reverse, Jaccard-both, Adamic Adar-directional, Adamic Adar-reverse, Adamic Adar-undirectional, preferential-directional, preferential-reverse, preferential-undirectional Note: All features are continuous (except some pro le features).
We were not able to explain all the features, but we did explain some: The skin-same is 1 when the skin types of two users are the same.
The age-dif is the di erence of ages (days after the birthday) of two users.
The good-product-matching means the matching coe cient of reviews with good rating (6 or more score).
The review-n-X means the number of reviews by user X.
The over6-Y is the number of good ratings (score of 6 or more) by user Y .
The trusted-n-X is the number of users whom user X trusts.
The trusting-n-Y is the number of users who trust user Y .
The Adamic-Adar-directional means the similarity within the directional trust network measured using the Adamic Adar index.
Table 5: Highly weighted features in trust prediction.
trusting-n-Y trusted-n-X Jaccard-undirectional Jaccard-directional all-product-cos Jaccard-reverse Adamic Adar-directional common-neighbors-directional all-product-Jaccard review-n-Y common-neighbors-undirectional bad-product-cos over6-X bad-product-Jaccard popularity-X










 -1.1712 -1.0746 -1.0309 -1.0119 Table 4: Performance of trust prediction.
Attributes Pro le Rating Trust Pro le + Rating Pro le + Trust Rating + Trust All
 Precision Recall






 of ratings by user x, the standard deviation of the ratings by user x, the number of good ratings, and the number of bad ratings.
We also calculate these values for brands and manufacturers.
Then we produce summations of ratings on product i: the number of reviews, the average and standard deviation of ratings, and so on.
As for the trust relation, we aggregate the ratings by users who are trusted by user x.
The number of ratings, the average of ratings, and the standard deviation are calculated to the product, the brand, and the manufacturer.
The rating prediction is reduced to classi cation.
The task is to classify a review into a good review class (with 6 points or more) and a non-good review class (with 5 points or less).
The results are presented in Table 6.
It is apparent that ratings of features and trust features have comparable performance.
In addition, F 1 is 86.8% using SVM if we use all the features.
The highly weighted features are presented in Table 7.
It is apparent that the number of reviews of products and the number of reviews by the user are important features.
Particularly interesting features include user-brand-ave and okiniiri-rate-ave. A user has favorite brands.
For that reason, the average of ratings of the brand is a good feature.
The average of ratings of users whom the user trusts is also a good feature, justifying the e ect of trusted users in Formula 1.
To investigate the correspondence between the practical classi ers and the evolution model in the previous section, we select a few highly weighted features that represent respective terms in the theoretical formulae.
Subsequently, we apply regression using SVM using the features to estimate parameters  1 and  1.
Pro le Rating Table 3: Features for rating prediction (by user X for product A) type user stat user product brand features skin-X (category), profession-X (category), age-X, history-X user-total-n, user-total-ave, user-total-std, user-total-over6, user-total-under2, user-oldest-review, user-latest-review user-brand-n, user-brand-ave, user-brand-std, user-brand-over6, user-brand-under2, user-manufacturer-n, user-manufacturer-ave, user-manufacturer-std, user-manufacturer-over6, user-manufacturer-under2 product-review-n, product-review-ave, product-review-std, product-review-over6, product-review-under2, product-oldest-review, product-latest-review brand-review-n, brand-review-ave, brand-review-std, brand-review-over6, brand-review-under2 manufacturer manufacturer-review-n, manufacturer-review-ave, manufacturer-review-std, Trust product brand manufacturer trusted-rate-ave, trusted-rate-std, trusted-manufacturer-review-over6, manufacturer-review-under2, trusted-review-n, under2 trusted-brand-review-n, trusted-brand-rate-ave, trusted-brand-rate-std, trusted-brand-over6, trusted-brand-under2 trusted-manufacturer-review-n, manufacturer-rate-std, under2 trusted-trusted-manufacturer-trusted-manufacturer-rate-ave, trusted-manufacturer-over6, trusted-over6, We explain some features hereinafter.
The user-total-n is the number of reviews by user X.
The user-total-ave and user-total-std respectively signify the average and standard deviation of the ratings by user X.
The user-latest-review is the number of days after the latest review is posted by user x.
The user-manufacturer-n is the number of reviews by user X of products made by the same manufacturer of product A.
The product-review-under2 is the number of ratings with a score of 2 or less on product A.
The brand-review-ave is the average rating of products with the same brand as product A.
The trusted-review-n is the number of reviews posted by users who are trusted by user A.
The trusted-brand-ave is the average rating of the brand of product A by users who are trusted by user X.
Table 7: Highly weighted features in rating prediction.
product-review-n product-review-over6 user-total-n product-latest-review product-review-under2 user-brand-ave trusted-rate-ave trusted-under2 trusted-brand-review-n user-manufacturer-ave user-total-over6 user-manufacturer-n brand-review-std trusted-manufacturer-review-n trusted-review-n


 -2.075



 -1.4693


 -1.0429 -1.0241
 Table 6: Performance of rating prediction.
Attributes Pro le Rating Trust Pro le + Rating Pro le + Trust Rating + Trust All
 Precision Recall






 For trust prediction, by selecting four highly weighted features and applying regression, we can obtain the following formula.
tx,y(t + 1) =  0tx,y(t) +  1sim(sx,I (t), sy,I (t))   0.34   trusting n Y + 0.31   trusting n X +0.25   Jaccard directional +0.09   all product cos (4)

 The  rst three terms can be attributed to tx,y(t).
We can estimate  1 as 0.09 if we take all-product-cos as a similarity measure.
Regarding rating prediction, by selecting four highly weighted features, we can construct the following model.
sx,i(t + 1) =  0sx,i(t) +  1 tx,y(t)sy,i(t)

 Nx y Trustedx   0.27   user total n + 0.42   product review n +0.16   user brand ave +0.14   trusted rate ave (5) Similarly, the  rst three terms are attributed to sx,i(t).
By selecting trusted-rate-ave as a rating measure, we can estimate  1 as 0.14.
For the analysis described above, we can infer that  0 = 0.09 and  1 = 0.14 for overall users and products in @cosme.
However, this value varies depending on the product.
Some products, brands, and manufacturers might have a large  0 and  1, i.e., strong community gravity.
Especially, from a marketing perspective, when a brand has a large bidirectional e ect, it generates a strong community: users become more connected, and a new product prevails easily in the community.
Each cosmetics manufacturer strives to establish and strengthen its own brands.
Therefore, it is reasonable to consider a brand as an important medium of the bidirectional e ects.
Below, we present analyses of the bidirectional e ect, particularly addressing cosmetics brands.
The parameters  1 and  1 can be estimated for each Chanel Yves Saint Laurent manufacturer Shiseido Chanel Yves Saint Laurent Parfums Table 8: List of brands with the highest CG measure.
Kanebo Es eld Lush Bison Guerlain Ida Laboratories brand: In Formula 4, the variable all-product-cos is calculated for all products of the target brand.
Regarding Formula 5, the variables product-review-n, user-brand-ave, and trusted-rate-ave are calculated using all products of the brand.
In this manner, we can estimate  1 and  1 for each brand b, denoted as  1(b) and  1(b).
To measure the strength of a brand based on the bidirectional interaction model, we propose a new index, called community gravity (CG).
The index is de ned for a set of items, which in this case corresponds to a brand.
It incorporates e ects from trust to rating, and from rating to trust, as follows.
CG(b) =  1(b)    1(b) Table 8 portrays products with high CG values.
Because the user s rating increases in a re ective manner in direct relation to  1 1, as shown in Formula 3, this measure represents a fundamental value of the brand characteristics.
It is apparent that some major brands have high CG values.
For example, Majolica Majorca is Shiseido s makeup brand for young consumers with a strong personality.
Users of Lush and Anna Sui cosmetics are known to have extremely high brand loyalty.
Consequently, high CG implies that the brand is strong because it can create strong user communities.
To clarify the characteristics of CG measure further, we attempt to investigate the di erence of user behavior depending on di erent CG values.
We can build a propagation network resembling Leskovec s recommendation network [13] using product reviews and trust relations.
We regard a review by trusted persons as a recommendation.
If Alice registers Betty as trusted, and Betty puts a good rating on product i at time t, then we regard it as a recommendation from Betty to Alice on product i that occurred at time t. Because @cosme permits a review only after a user purchases or tries a product, we can regard a review as proof of purchase: in other words, we can con dently infer that Alice bought i before time t if Alice has a review on product i at time t.
Then we can de ne the success of propagation as follows: If Alice receives a recommendation on product x from Betty at time t1, and if Alice writes a ( rst) review on product i at time t2, where t1 < t2 < t1 + T 7, then we consider that the recommendation is successful.
We can draw a propagation network for various products.
Figure 6 portrays the
 Figure 5: Propagation network for an eyelash ex-pander of the highest-CG brand.
(n = 630, e = 858, where n is the number of nodes and e is the number of edges.)
Figure 6: Propagation network for a lotion with the most popular brand (but with low CG).
(n = 581, e =
 (success) propagation network on a Majolica Majorca eyelash expander, which has the highest CG.
The nodes are users and the (directed) edges are the success propagations between two users.
A core group of users who are mutually connected by dense relations is readily apparent.
These users di use the product to more peripheral users.
On the other hand, Figs.
5 display the network for a lotion of DHC, which is the most popular brand with numerous product reviews, although the CG value is low (in the 83rd place).
Although they have almost equal quantities of nodes and edges, this network is  atter than that of Majolica Majorca.
Those users do not produce big clusters.
Success rates of the propagations are 1.82% and 0.47% for these two networks.
We present a scatter plot of the recommendation success rate and the CG value for popular brands in Fig. 7.
Using the plot, we can assess the correlation of these two values.
In summary, the CG measure is a good index to represent a user s bidirectional e ects on trust and rating.
A high CG value implies the power of the brand to produce strong user communities.
o i t a d n e m m o c e r f o e t a r s s e c c u s

















 Figure 7: Plot of CG and the recommendation success rate.
We must describe the evolution model of trust and rating in Section 3.
Alternatively, we can consider a static model with which data analysis can be done easily.
Below we describe the model brie y.
Assuming that we have two matrices S and T, then S is an n  n trust matrix, representing who trusts whom.
In addition, T is an n m rating matrix, representing one s rating for each product.
Then we can calculate the bidirectional e ect using the matrices on a (set of) products.
We denote trustx,y if user x has trust with user y, and ratex,i if user x rated product i high.
Then the probability to rate product i is represented as P (ratey,i|trusty,x, ratex,i), and the ratio to P (ratey,i|ratex,i) can be an index to represent the degree to which trust a ects the ratings.
on purchased products is represented as P (trusty,x|ratey,i, ratex,i), which can be compared with P (trusty,x).
Consequently, both e ects can be an index by multiplying two  gures as8 P (ratey,i|trusty,x, ratex,i) In contrast, the probability for user x to trust user y based P (ratey,i|ratex,i) Table 9: Performance of trust prediction (Epinion dataset).
Attributes Rating Trust Rating + Trust Precision Recall



 Table 10: Performance of rating prediction (Epinion dataset).
Attributes Rating Trust Rating + Trust Precision Recall



 We used the extended Epinions dataset9, which contains about 132,000 users and 840,000 trust statements, to conduct the same experiment.
Figures 9 and 10 present results of trust prediction and rating prediction, as we have done with the @cosme dataset.
The Epinions dataset does not include user pro les.
For that reason, we cannot use the attributes derived from user pro les.
Both the rating and trust information are important for the performance.
Particularly, Jaccard-undirectional, Jaccard-directional, trusting-n-X, and trusted-n-Y are the useful features for trust prediction, and user-total-n, user-total-over4, trusted-review-n, and product-review-n are useful features for rating prediction.
Overall, the tendency resembles that of the @cosme dataset very well, which is evidence of the robustness of our algorithm.
The algorithm might be applicable to online shopping sites (such as Amazon.com, Epinions, and eBay) if we were able to use trust (or bookmarking) data.
We show that a small number of instances of expressed trust per individual enables us to predict trust between any two people in the system with high accuracy.
The development of social networking services might enable the use of social network data at online shopping sites, thereby providing the opportunity to use our algorithm to elucidate the bidirectional e ects of products.
Our algorithm is also applicable to existing data of several types: e.g., published data (e.g.
DBLP, Citeseer, and Cora database) have information about papers presented at conferences (which corresponds to purchase of a product), and the co-authorship of a paper or co-a liation to an institute (which corresponds to trust in a person).
Consequently, the brand value of a conference, a journal, or an academic  eld is measurable.
  P (trusty,x|ratey,i, ratex,i) j P (trusty,x) = P (trusty,x, ratey,i, ratex,i) P (trusty,x)P (ratey,i, ratex,i)  
 The denominator is calculable by counting nonzero values in T and the number of nonzero values in SST.
Therefore, the bidirectional e ect on product i can be approximated using the two matrices Tt and St.
This model can be considered as a simple variant (discarding the evolution aspect) of the community gravity measure described in Section 5.
However, because the evolutionary aspect is important to understand community behavior, we adopt the evolution model in this paper.
Our algorithm is applicable if we have trust data (among users) and rating data.
We also conducted analysis of the dataset of Epinions, which is a website where people can review products.
static model, the time of purchase and trust is discarded.
Numerous attempts have been undertaken to investigate brand communities in the marketing science  eld.
For example, Brown et al. compare members and nonmembers of virtual communities and report that the community members are more likely to engage in online shopping and have higher propensity to revisit the website [5].
Muniz and O Guinn expand the traditional model of  customer-brand  relation to a  customer-brand-customer  triad [19].
The results of  eld research and in-depth interviews re ect that the brand community is a powerful tool to strengthen brand loyalty.
McAlexander, Schouten, and Koenig also describe the impact of brand community [17].
They show that customers who purchase a branded product  often do so with
 www.trustlet.org/wiki/Extended Epinions dataset.
of brand-focused interpersonal bonds.  Forman et al. report a relation between reviews and sales from the identity disclosure perspective [6].
Our study is inspired by these  ndings, which have provided a general model to explain the emergence and strength of brand communities.
Recently, evolution models of social networks have received much attention: J. Leskovec et al. develop a model of network evolution using four large datasets: Flickr, Delicious, Yahoo!
Answers, and LinkedIn [14].
Anagnostopou-los et al. de ne the general models of social correlation [3].
Causes of correlation in social networks are categorizable into in uence, homophily, and environment.
They used the Flickr dataset and analyzed the e ects.
Our research shares a similar motivation with those studies: we also seek a model of the interaction and evolvement of social networks.
As described in this paper, we have explained community gravity, which is the bidirectional e ect of trust and rating both theoretically and empirically, using data found on a viral marketing site @cosme.
We  rst described the model in Section 3.
Numerous methods might be used to produce the features used in the model.
Therefore, we make trust prediction and rating prediction problems in Section 4.
By solving the problems, we can identify good features that are useful in the model.
Community gravity is de ned and measured in Section 5; we show brands with strong CG values.
The community gravity is also observed by investigating product propagation networks, where a product with high CG value can be di used easily through the network.
Depending on the product, this bidirectional e ect can be large, resulting in highly clustered user groups.
It can be considered as brand strength from a user-interaction perspective.
Although our model is evaluated only for a couple of datasets, the bidirectional interaction is apparently an essential model for many other online social communities.
By identifying communities with high community gravity, future investigations can show how to cultivate strong communities on the Web and how system design and interaction design should be done.
Acknowledgments We thank istyle Inc. for providing the dataset that we used for research purposes, in addition to invaluable advice and discussion.
